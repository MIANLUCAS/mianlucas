/* NM: Core script */
(function(b){function l(){this.init()}b.nmThemeExtensions||(b.nmThemeExtensions={});l.prototype={init:function(){var a=this;a.classHeaderFixed="header-on-scroll";a.classMobileMenuOpen="mobile-menu-open";a.classSearchOpen="header-search-open";a.classWidgetPanelOpen="widget-panel-open";a.$window=b(window);a.$document=b(document);a.$html=b("html");a.$body=b("body");a.$pageIncludes=b("#nm-page-includes");a.$pageOverlay=b("#nm-page-overlay");a.$topBar=b("#nm-top-bar");a.$header=b("#nm-header");a.$headerPlaceholder=
b("#nm-header-placeholder");a.headerScrollTolerance=0;a.$mobileMenuBtn=b("#nm-mobile-menu-button");a.$mobileMenu=b("#nm-mobile-menu");a.$mobileMenuScroller=a.$mobileMenu.children(".nm-mobile-menu-scroll");a.$mobileMenuLi=a.$mobileMenu.find("ul li.menu-item");a.$widgetPanel=b("#nm-widget-panel");a.widgetPanelAnimSpeed=250;a.panelsAnimSpeed=200;a.$shopWrap=b("#nm-shop");a.isShop=a.$shopWrap.length?!0:!1;a.shopCustomSelect="0"!=nm_wp_vars.shopCustomSelect?!0:!1;a.searchEnabled="0"!==nm_wp_vars.shopSearch?
!0:!1;if("0"!=nm_wp_vars.pageLoadTransition){a.isIos=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);if(!a.isIos)a.$window.on("beforeunload",function(f){b("#nm-page-load-overlay").addClass("nm-loader");a.$html.removeClass("nm-page-loaded")});"onpagehide"in window?window.addEventListener("pageshow",function(){setTimeout(function(){a.$html.addClass("nm-page-loaded")},150)},!1):setTimeout(function(){a.$html.addClass("nm-page-loaded")},150)}a.$body.removeClass("nm-preload");a.isTouch=
a.$html.hasClass("touch")?!0:!1;a.isTouch?"0"!=nm_wp_vars.touchHover&&a.$html.addClass("has-hover"):a.$html.addClass("has-hover");a.headerIsFixed=a.$body.hasClass("header-fixed")?!0:!1;a.$html.hasClass("no-touch")&&a.$html.hasClass("history")?(a.hasPushState=!0,window.history.replaceState({nmShop:!0},"",window.location.href)):a.hasPushState=!1;a.setScrollbarWidth();a.headerCheckPlaceholderHeight();a.headerIsFixed&&(a.headerSetScrollTolerance(),a.mobileMenuPrep());a.widgetPanelPrep();0<window.navigator.userAgent.indexOf("MSIE ")&&
a.$html.addClass("nm-old-ie");a.loadExtension();a.bind();a.initPageIncludes();a.$body.hasClass("nm-added-to-cart")&&(a.$body.removeClass("nm-added-to-cart"),a.$window.load(function(){a.$widgetPanel.length&&(a.widgetPanelShow(!0,!0),setTimeout(function(){a.widgetPanelCartHideLoader()},1E3))}))},loadExtension:function(){b.nmThemeExtensions.shop&&b.nmThemeExtensions.shop.call(this);this.searchEnabled&&b.nmThemeExtensions.search&&b.nmThemeExtensions.search.call(this);b.nmThemeExtensions.singleProduct&&
b.nmThemeExtensions.singleProduct.call(this);b.nmThemeExtensions.cart&&b.nmThemeExtensions.cart.call(this);b.nmThemeExtensions.checkout&&b.nmThemeExtensions.checkout.call(this);b.nmThemeExtensions.blog&&b.nmThemeExtensions.blog.call(this)},setScrollbarWidth:function(){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;";document.body.appendChild(a);this.scrollbarWidth=a.offsetWidth-a.clientWidth;document.body.removeChild(a)},
pageIsScrollable:function(){return document.body.scrollHeight>document.body.clientHeight},urlGetParameter:function(a){var b=decodeURIComponent(window.location.search.substring(1)).split("&"),d;for(d=0;d<b.length;d++){var c=b[d].split("=");if(c[0]===a)return void 0===c[1]?!0:c[1]}},updateUrlParameter:function(a,b,d){var c=a.indexOf("#"),e=-1===c?"":a.substr(c);a=-1===c?a:a.substr(0,c);c=new RegExp("([?&])"+b+"=.*?(&|$)","i");var f=-1!==a.indexOf("?")?"&":"?";a=a.match(c)?a.replace(c,"$1"+b+"="+d+"$2"):
a+f+b+"="+d;return a+e},setPushState:function(a){this.hasPushState&&window.history.pushState({nmShop:!0},"",a)},headerCheckPlaceholderHeight:function(){if(!this.$body.hasClass(this.classHeaderFixed)){var a=this.$header.innerHeight(),b=parseInt(this.$headerPlaceholder.css("height"));a!==b&&this.$headerPlaceholder.css("height",a+"px")}},headerSetScrollTolerance:function(){this.headerScrollTolerance=this.$topBar.length&&this.$topBar.is(":visible")?this.$topBar.outerHeight(!0):0},headerToggleFixedClass:function(a){a.$document.scrollTop()>
a.headerScrollTolerance?a.$body.hasClass(a.classHeaderFixed)||a.$body.addClass(a.classHeaderFixed):a.$body.hasClass(a.classHeaderFixed)&&a.$body.removeClass(a.classHeaderFixed)},bind:function(){var a=this,f=null;a.$window.resize(function(){f&&clearTimeout(f);f=setTimeout(function(){a.headerCheckPlaceholderHeight();a.headerIsFixed&&(a.headerSetScrollTolerance(),a.mobileMenuPrep())},250)});var d=window.matchMedia("(min-width: 992px)"),c=window.matchMedia("(max-width: 991px)");d.addListener(function(b){b.matches&&
a.$body.hasClass(a.classMobileMenuOpen)&&a.pageOverlayHide()});c.addListener(function(b){b.matches&&a.$body.hasClass(a.classSearchOpen)&&a.pageOverlayHide()});if(a.isTouch)a.$window.on("orientationchange",function(){a.$body.addClass("touch-orientation-change");setTimeout(function(){a.$body.removeClass("touch-orientation-change")},500)});a.headerIsFixed&&(a.$window.bind("scroll.nmheader",function(){a.headerToggleFixedClass(a)}),a.$window.trigger("scroll"));d=b("#nm-top-menu").children(".menu-item");
c=b("#nm-main-menu-ul").children(".menu-item");b.merge(d,c).hover(function(){var d=b(this).children(".sub-menu");if(d.length){var c=a.$window.innerWidth(),f=d.offset().left,g=d.width();c-=f+g;0>c?d.css("left",c-33+"px"):d.css("left","")}});a.$mobileMenuBtn.bind("click",function(b){b.preventDefault();a.$body.hasClass(a.classMobileMenuOpen)?a.mobileMenuClose(!0):a.mobileMenuOpen()});a.$mobileMenuLi.bind("click.nmMenuToggle",function(a){a.stopPropagation();var d=b(this),c=d.children("ul");!c.length||
d.hasClass("nm-notoggle")&&!b(a.target).hasClass("nm-menu-toggle")||(a.preventDefault(),d.toggleClass("active"),c.toggleClass("open"))});a.$widgetPanel.length&&a.widgetPanelBind();a.$pageIncludes.hasClass("login-popup")&&b("#nm-menu-account-btn").bind("click",function(a){a.preventDefault();b("#nm-login-wrap").children(".login").css("display","");b.magnificPopup.open({mainClass:"nm-login-popup nm-mfp-fade-in",alignTop:!0,closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,
items:{src:"#nm-login-popup-wrap",type:"inline"},callbacks:{close:function(){b("#nm-login-wrap").addClass("inline fade-in slide-up");b("#nm-register-wrap").removeClass("inline fade-in slide-up")}}})});a.$pageOverlay.bind("click",function(){a.pageOverlayHide()})},pageOverlayShow:function(){this.$body.hasClass(this.classMobileMenuOpen)?this.$pageOverlay.addClass("nm-mobile-menu-overlay"):this.$body.hasClass(this.classSearchOpen)?this.$pageOverlay.addClass("nm-header-search-overlay"):this.$body.hasClass(this.classWidgetPanelOpen)&&
this.$pageOverlay.addClass("nm-widget-panel-overlay");this.$pageOverlay.addClass("show")},pageOverlayHide:function(){var a=this;a.$body.hasClass(a.classMobileMenuOpen)?a.mobileMenuClose(!1):a.$body.hasClass(a.classSearchOpen)?a.headerSearchTogglePanel():a.$body.hasClass(a.classWidgetPanelOpen)&&a.widgetPanelHide();a.$body.trigger("nm_page_overlay_hide");a.$pageOverlay.addClass("fade-out");setTimeout(function(){a.$pageOverlay.removeClass()},a.panelsAnimSpeed)},mobileMenuPrep:function(){var a=this.$window.height()-
this.$header.outerHeight(!0);this.$mobileMenuScroller.css({"max-height":a+"px","margin-right":"-"+this.scrollbarWidth+"px"})},mobileMenuOpen:function(a){a=this.$header.outerHeight(!0);this.$mobileMenuScroller.css("margin-top",a+"px");this.$body.addClass(this.classMobileMenuOpen);this.pageOverlayShow()},mobileMenuClose:function(a){this.$body.removeClass(this.classMobileMenuOpen);a&&this.pageOverlayHide();setTimeout(function(){b("#nm-mobile-menu-main-ul").children(".active").removeClass("active").children("ul").removeClass("open");
b("#nm-mobile-menu-secondary-ul").children(".active").removeClass("active").children("ul").removeClass("open")},250)},widgetPanelPrep:function(){var a=this;a.widgetPanelCartHideScrollbar();a.cartPanelAjax=null;"0"!=nm_wp_vars.cartPanelQtyArrows&&(a.quantityInputsBindButtons(a.$widgetPanel),a.$widgetPanel.on("blur","input.qty",function(){var f=b(this),d=parseFloat(f.val()),c=parseFloat(f.attr("max"));if(""===d||"NaN"===d)d=0;"NaN"===c&&(c="");d>c&&(f.val(c),d=c);0<d&&a.widgetPanelCartUpdate(f)}),a.$document.on("nm_qty_change",
function(f,d){a.$body.hasClass(a.classWidgetPanelOpen)&&a.widgetPanelCartUpdate(b(d))}))},widgetPanelBind:function(){var a=this;a.isTouch&&(a.$pageOverlay.on("touchmove",function(a){a.preventDefault()}),a.$widgetPanel.on("touchmove",function(a){a.stopPropagation()}));b("#nm-menu-cart-btn, #nm-mobile-menu-cart-btn").bind("click.nmAtc",function(f){f.preventDefault();if(a.$body.hasClass(a.classMobileMenuOpen)){var d=b(this);a.pageOverlayHide();setTimeout(function(){d.trigger("click")},a.panelsAnimSpeed)}else a.widgetPanelShow()});
b("#nm-widget-panel-close").bind("click.nmWidgetPanelClose",function(b){b.preventDefault();a.pageOverlayHide()});a.$widgetPanel.on("click.nmCartPanelClose","#nm-cart-panel-continue",function(b){b.preventDefault();a.pageOverlayHide()})},widgetPanelShow:function(a,b){var d=this;b&&"0"==nm_wp_vars.cartPanelShowOnAtc?d.shopShowNotices():(a&&d.widgetPanelCartShowLoader(),d.$body.addClass("widget-panel-opening "+d.classWidgetPanelOpen),d.pageOverlayShow(),setTimeout(function(){d.$body.removeClass("widget-panel-opening")},
d.widgetPanelAnimSpeed))},widgetPanelHide:function(){var a=this;a.$body.addClass("widget-panel-closing");a.$body.removeClass(a.classWidgetPanelOpen);setTimeout(function(){a.$body.removeClass("widget-panel-closing")},a.widgetPanelAnimSpeed)},widgetPanelCartShowLoader:function(){b("#nm-cart-panel-loader").addClass("show")},widgetPanelCartHideLoader:function(){b("#nm-cart-panel-loader").addClass("fade-out");setTimeout(function(){b("#nm-cart-panel-loader").removeClass("fade-out show")},200)},widgetPanelCartHideScrollbar:function(){this.$widgetPanel.children(".nm-widget-panel-inner").css("marginRight",
"-"+this.scrollbarWidth+"px")},widgetPanelCartUpdate:function(a){var f=this;f.cartPanelAjax&&f.cartPanelAjax.abort();a.closest("li").addClass("loading");var d=b("#nm-cart-panel-form"),c=d.find("#_wpnonce"),e={};c.length?(e.nm_cart_panel_update="1",e.update_cart="1",e[a.attr("name")]=a.val(),e._wpnonce=c.val(),f.cartPanelAjax=b.ajax({type:"POST",url:d.attr("action"),data:e,dataType:"html",error:function(a,d,c){console.log("NM: AJAX error - widgetPanelCartUpdate() - "+c);b("#nm-cart-panel .cart_list").children(".loading").removeClass("loading")},
success:function(a){b(document.body).trigger("wc_fragment_refresh").trigger("updated_cart_totals")},complete:function(){f.cartPanelAjax=null}})):console.log("NM - widgetPanelCartUpdate: Nonce field not found.")},shopReplaceFragments:function(a){var f;b.each(a,function(a,c){f=b(c);f.length&&b(a).replaceWith(f)})},quantityInputsBindButtons:function(a){var f=this;a.off("click.nmQty").on("click.nmQty",".nm-qty-plus, .nm-qty-minus",function(){var a=b(this),c=a.closest(".quantity").find(".qty"),e=parseFloat(c.val()),
k=parseFloat(c.attr("max")),h=parseFloat(c.attr("min")),g=c.attr("step");e&&""!==e&&"NaN"!==e||(e=0);if(""===k||"NaN"===k)k="";if(""===h||"NaN"===h)h=0;if("any"===g||""===g||void 0===g||"NaN"===parseFloat(g))g=1;a.hasClass("nm-qty-plus")?k&&(k==e||e>k)?c.val(k):(c.val(e+parseFloat(g)),f.quantityInputsTriggerEvents(c)):h&&(h==e||e<h)?c.val(h):0<e&&(c.val(e-parseFloat(g)),f.quantityInputsTriggerEvents(c))})},quantityInputsTriggerEvents:function(a){a.trigger("change");this.$document.trigger("nm_qty_change",
a)},initPageIncludes:function(){var a=this;if(a.$pageIncludes.hasClass("row-full-height")){var f=function(){var c=b(".nm-row-full-height:first");if(c.length){var d=a.$window.height(),f=c.offset().top,e;d>f&&(e=100-f/(d/100),c.css("min-height",e+"vh"))}};f();var d=null;a.$window.bind("resize.nmRow",function(){d&&clearTimeout(d);d=setTimeout(function(){f()},250)})}a.isTouch&&0==nm_wp_vars.rowVideoOnTouch||!a.$pageIncludes.hasClass("video-background")||b(".nm-row-video").each(function(){var a=b(this),
c=a.data("video-url");c&&(c=vcExtractYoutubeId(c))&&insertYoutubeVideoAsBackground(a,c)});a.$window.load(function(){if(a.$pageIncludes.hasClass("banner")){var c=b(".nm-banner");a.isShop&&a.filtersEnableAjax&&c.find(".nm-banner-shop-link").bind("click",function(c){c.preventDefault();b(this).attr("href")&&a.shopExternalGetPage(b(this).attr("href"))})}if(a.$pageIncludes.hasClass("banner-slider")){var d=function(a,b){if(a.slideIndex!=b){a.slideIndex=b;a.$bannerContent&&a.$bannerContent.removeClass(a.bannerAnimation);
var c=a.isSlick?a.find(".slick-track .slick-active"):a.children(".flickity-viewport").children(".flickity-slider").children(".is-selected");a.$bannerContent=c.find(".nm-banner-text-inner");a.$bannerContent.length&&(a.bannerAnimation=a.$bannerContent.data("animate"),a.$bannerContent.addClass(a.bannerAnimation))}},f=function(a,b){var c=b.children(".nm-banner");c.hasClass("alt-mobile-layout")?"absolute"!=c.children(".nm-banner-content").css("position")?a.addClass("alt-mobile-layout-showing"):a.removeClass("alt-mobile-layout-showing"):
a.removeClass("alt-mobile-layout-showing")};b(".nm-banner-slider").each(function(){var c=b(this);c.isSlick=c.hasClass("plugin-slick")?!0:!1;c.children().wrap('<div class="nm-banner-slide"></div>');if(c.isSlick){var e={arrows:!1,prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-thin-right"></i></a>',dots:!1,edgeFriction:0,infinite:!1,pauseOnHover:!1,speed:350,touchThreshold:30};e=b.extend(e,c.data());
c.on("init",function(){a.$document.trigger("banner-slider-loaded");d(c,0)});c.on("afterChange",function(a,b,e){d(c,e)});c.on("setPosition",function(a,c){var d=c.$slider,e=b(c.$slides[c.currentSlide]);f(d,e)});c.slick(e)}else{e=b.extend({},c.data("options"));c.one("select.flickity",function(){a.$document.trigger("banner-slider-loaded");d(c,0)});c.on("settle.flickity",function(){d(c,g.selectedIndex)});c.flickity(e);var g=c.data("flickity");c.on("select.flickity",function(){var a=b(this),c=g?b(g.selectedElement):
a.find(".is-selected");f(a,c)});c.trigger("select.flickity");if(c.hasClass("has-text-parallax")){var k=c.find(".nm-banner-text"),h;c.on("scroll.flickity",function(a,b){g.slides.forEach(function(a,b){h=1*(a.target+g.x)/3;k[b].style.transform="translate3d("+h+"px,0,0)"})})}}})}if(a.$pageIncludes.hasClass("product-slider")){c=b(".nm-product-slider");var e={adaptiveHeight:!0,arrows:!1,prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-thin-right"></i></a>',
dots:!0,edgeFriction:0,infinite:!1,speed:350,touchThreshold:30,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:518,settings:{slidesToShow:1,slidesToScroll:1}}]};c.each(function(){var a=b(this),c=a.find(".nm-products:first");e=b.extend(e,a.data());a=a.data("slides-to-show-mobile");var d=2==parseInt(e.slidesToShow)?2:3,f=2<parseInt(a)?a:2;e.responsive[0].settings.slidesToShow=
d;e.responsive[0].settings.slidesToScroll=d;e.responsive[1].settings.slidesToShow=f;e.responsive[1].settings.slidesToScroll=f;e.responsive[2].settings.slidesToShow=a;e.responsive[2].settings.slidesToScroll=a;c.slick(e)})}a.$pageIncludes.hasClass("post-slider")&&(c=b(".nm-post-slider"),e={adaptiveHeight:!0,arrows:!1,dots:!0,edgeFriction:0,infinite:!1,pauseOnHover:!1,speed:350,touchThreshold:30,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},
{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:518,settings:{slidesToShow:1,slidesToScroll:1}}]},c.each(function(){var a=b(this);e=b.extend(e,a.data());2==e.slidesToShow&&(e.responsive[0].settings.slidesToShow=2,e.responsive[0].settings.slidesToScroll=2);a.slick(e)}));"0"!=nm_wp_vars.wpGalleryPopup&&a.$pageIncludes.hasClass("wp-gallery")&&b(".gallery").each(function(){b(this).magnificPopup({mainClass:"nm-wp-gallery-popup nm-mfp-fade-in",closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',
removalDelay:180,delegate:".gallery-icon > a",type:"image",gallery:{enabled:!0,arrowMarkup:'<a title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir% nm-font nm-font-angle-right"></a>'},image:{titleSrc:function(a){return a.el.parent().next(".wp-caption-text").text()||""}},closeBtnInside:!1})})});if(a.$pageIncludes.hasClass("product_categories")){var c=b(".nm-product-categories");a.isShop&&a.filtersEnableAjax&&c.find(".product-category a").bind("click",function(c){c.preventDefault();a.shopExternalGetPage(b(this).attr("href"))});
a.$pageIncludes.hasClass("product_categories_masonry")&&a.$window.load(function(){for(var a=0;a<c.length;a++){var d=b(c[a]).children(".woocommerce").children("ul");d.masonry({itemSelector:".product-category",gutter:0,initLayout:!1});d.masonry("on","layoutComplete",function(){d.closest(".nm-product-categories").removeClass("nm-loader");d.addClass("show")});d.masonry()}})}if(a.$pageIncludes.hasClass("lightbox")){var e,k,h;b(".nm-lightbox").each(function(){b(this).bind("click",function(a){a.preventDefault();
a.stopPropagation();e=b(this);k=e.data("mfp-type");h={mainClass:"nm-wp-gallery-popup nm-mfp-zoom-in",closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,type:k,closeBtnInside:!1,image:{titleSrc:"data-mfp-title"}};h.closeOnContentClick="inline"==k?!1:!0;e.magnificPopup(h).magnificPopup("open")})})}}};b.nmTheme=l.prototype;b(document).ready(function(){new l})})(jQuery);