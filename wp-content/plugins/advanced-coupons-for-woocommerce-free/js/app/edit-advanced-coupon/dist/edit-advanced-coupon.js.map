{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/cart_conditions/toggles.ts","webpack:///./src/helper.ts","webpack:///./src/cart_conditions/templates/condition_logic.ts","webpack:///./src/cart_conditions/templates/condition_group.ts","webpack:///./src/cart_conditions/groups.ts","webpack:///./src/cart_conditions/templates/logic.ts","webpack:///./src/cart_conditions/templates/product_category.ts","webpack:///./src/cart_conditions/templates/customer_logged_in_status.ts","webpack:///./src/cart_conditions/templates/customer_user_role.ts","webpack:///./src/cart_conditions/templates/disallowed_customer_user_role.ts","webpack:///./src/cart_conditions/templates/cart_quantity.ts","webpack:///./src/cart_conditions/fields.ts","webpack:///./src/cart_conditions/templates/cart_subtotal.ts","webpack:///./src/cart_conditions/scrapers.ts","webpack:///./src/cart_conditions/save.ts","webpack:///./src/cart_conditions/table.ts","webpack:///./src/cart_conditions/restrictions.ts","webpack:///./src/cart_conditions/tabs.ts","webpack:///./src/cart_conditions/index.ts","webpack:///./src/bogo_deals/templates/upsell.ts","webpack:///./src/bogo_deals/templates/category_first_column.ts","webpack:///./src/bogo_deals/templates/placeholder_row.ts","webpack:///./src/bogo_deals/templates/product_categories.ts","webpack:///./src/bogo_deals/templates/product_first_column.ts","webpack:///./src/bogo_deals/templates/specific_products.ts","webpack:///./src/bogo_deals/toggles.ts","webpack:///./src/bogo_deals/templates/combination_products.ts","webpack:///./src/bogo_deals/save.ts","webpack:///./src/bogo_deals/templates/add_edit_row.ts","webpack:///./src/bogo_deals/templates/table_row.ts","webpack:///./src/bogo_deals/table.ts","webpack:///./src/bogo_deals/index.ts","webpack:///./src/toggle_fields.ts","webpack:///./src/upsell.ts","webpack:///./src/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","document","querySelector","toggle_add_condition_form","$button","this","$condition_actions","closest","hasClass","find","show","hide","toggle_editing_mode","toggle","data","prop","popuplate_taxonomy_term_options","$taxonomy","$condition_block","$tax_terms","taxonomy","val","terms","taxonomy_data","filter","slug","taxonomy_terms","length","remove","term","term_id","optionObj","Option","append","trigger","popuplate_shipping_region_options","$shipping_zone","$shipping_region","zone_id","regions","region_labels","region_options","code","toggle_overlay","overlay","type","display","css","esc_attr","text","map","replace","remove_leading_zeros","decimal_separator","acfw_edit_coupon","$input","substring","get_allowed_minimum_value","condition","selected","value_1","value_2","selected_multiple","array","indexOf","condition_options","condition_field_options","exactly","anyexcept","morethan","lessthan","price_to_float","price","parseFloat","condition_logic_template","logic_field_options","and","or","condition_group_template","fields_markup","empty_cart_conditions_field","html","add_condition_group","condition_groups","blur","removeClass","remove_condition_group","module_block","$condition_group","$cgroup_logic","index","next","prev","no_condition_group_msg","logic_template","premium_cart_condition_fields","add_condition_field","$condition_type","$condition_fields","condition_type","fields_count","condition_field_markup","get_condition_field","vex","dialog","alert","unsafeMessage","cart_condition_field","fail_add_condition_field","remove_condition_field","$condition_field","$cfield_logic","markup","quantity","categories","product_category","title","placeholder","field","quantityLabel","cart_quantity","condition_label","condOption","options","x","product_category_template","customer_logged_in_status","customer_logged_in_status_template","customer_user_role","user_role_options","customer_user_role_template","disallowed_customer_user_role","disallowed_customer_user_role_template","desc","cart_condition_fields","cart_subtotal","field_key","template_callback","default_data_value","is_condition_field","cart_conditon_field_options","woocommerce_admin_meta_boxes","save_cart_conditions","querySelectorAll","post_status","post_id","form_data","forEach","condition_group","condition_fields","fields","classList","contains","condition_field","push","temp","temp2","temp3","dataset","field_data","parseInt","scraper_callback","scrape_condition_group_data","group","objects","min","Number","isInteger","cart_conditions_invalid","addClass","callback","notice_settings","message","btn_text","btn_url","auto_apply_display","is","test","cart_notice_url_invalid","response","status","click","error_msg","cart_conditions","action","coupon_id","post","ajaxurl","save_on_coupon_publish","e","preventDefault","setTimeout","submit","product_table_buttons","trigger_add_table_row_form","$table","$tbody","exclude","get_add_edit_form_row_markup","trigger_edit_table_row_form","$row","splice","product_id","replaceWith","add_edit_table_row","$search","$condition","$quantity","minimum","product_label","JSON","stringify","fill_form_propery_error_msg","cancel_add_edit_table_row","colspan","append_blank_placeholder_table_row","product_table_remove_product","no_products_added","prodOption","add","edit","cancel","type_to_search","btnText","restrict_number_min_value","attr","update_input_minimum_value","$select","$field","field_type","selector","update_has_ordered_before_condition_label","within_a_period_label","number_of_orders_label","$label","validate_price_field_value","input_price","minimum_price","condition_value_type_change","$type","$value","navigate_tabs","$tab","$module_block","panel","init_cart_conditions","row","load_condition_group_fields","then","addLogic","field_markup","upsell_template","upsell","bogo_deals_type","category_first_column_template","category_id","category_label","placeholder_table_row_template","no_categories_added","discount_type","discount_value","product_first_column_template","toggle_block_data_type","tempBlock","block_type","condition_block","deals_block","bogo_deals","conditions","deals","block_data","block_data_type","conditions_type","deals_type","isPremium","is_deals","products","bogo_form_fields","priceType","priceCol","currency_symbol","discount_field_options","priceTh","label","combination_products_template","data_type","add_prod_cat_label","categoryLabel","tbody","product_cat","add_product_label","productLabel","product","$multipleDesc","save_bogo_deals","condition_rows","deal_rows","type_field","$notice_options","get_data","bogo_deals_save_error_msg","button_text","button_url","notice_type","console","log","rows","clear_bogo_deals","confirm","_wpnonce","update_combined_products_list","$temp","current_data","$options","$discount_type","$discount_value","discount_val","toString","isNaN","add_edit_row_template","option","override","percent","fixed","table_row_template","$object_row","trigger_toggle","restrict_quantity_value","bogo_toggle_editing_mode","toggle_disable_enable_fields","$fields","exludeCouponShown","upsell_advance_usage_limits","usage_limits","upsell_exclude_coupons_restriction","usage_restriction","afterClose","upsell_auto_apply","auto_apply","ready","$","on","height","each"],"mappings":"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","file":"edit-advanced-coupon.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","declare var jQuery: any;\r\nconst $ = jQuery;\r\nconst module_block: HTMLElement = document.querySelector( \"#acfw_cart_conditions\" );\r\n\r\n/**\r\n * Toggle add condition form.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function toggle_add_condition_form(): void {\r\n\r\n    const $button: JQuery          = $( this ),\r\n        $condition_actions: JQuery = $button.closest( \"div.condition-group-actions\" );\r\n\r\n    if ( $button.hasClass( \"add-condition-trigger\" ) ) {\r\n        $condition_actions.find( \".add-condition-form\" ).show();\r\n        $button.hide();\r\n    } else {\r\n        $condition_actions.find( \".add-condition-form\" ).hide();\r\n        $condition_actions.find( \".add-condition-trigger\" ).show();\r\n    }\r\n}\r\n\r\n/**\r\n * Toggle editing mode.\r\n * \r\n * @since 1.0.0\r\n */\r\nexport function toggle_editing_mode( toggle: boolean ): void {\r\n\r\n    $( module_block ).data( \"editing\" , toggle );\r\n    $( module_block ).find( \"#save-cart-conditions\" ).prop( \"disabled\" , ! toggle );\r\n}\r\n\r\n/**\r\n * Populate custom taxonomy options.\r\n * \r\n * @since 1.14\r\n */\r\nexport function popuplate_taxonomy_term_options() {\r\n\r\n    const $taxonomy: JQuery      = $(this),\r\n        $condition_block: JQuery = $taxonomy.closest( \".condition-field\" ),\r\n        $tax_terms: JQuery       = $condition_block.find( \"select.condition-value\" ),\r\n        taxonomy: string         = $taxonomy.val() + \"\",\r\n        terms: any[]             = $condition_block.data( 'selected_terms' ),\r\n        tax_options: any[]       = $( module_block ).data( 'custom_tax_options' ),\r\n        taxonomy_data: any[]     = tax_options.filter( (t) => t.slug == taxonomy ),\r\n        taxonomy_terms: any[]    = taxonomy_data.length ? taxonomy_data[0].terms : [];\r\n\r\n    $tax_terms.val( null ).find( 'option' ).remove();\r\n\r\n    if ( ! taxonomy_terms.length ) return;\r\n\r\n    for ( let term of taxonomy_terms ) {\r\n\r\n        let { name , term_id } = term;\r\n        let optionObj: HTMLOptionElement = new Option( name , term_id );\r\n        $tax_terms.append( optionObj );\r\n    }\r\n\r\n    $tax_terms.val( terms ).trigger( 'change' );\r\n}\r\n\r\n/**\r\n * Populate shipping zone region options.\r\n * \r\n * @since 1.14\r\n */\r\nexport function popuplate_shipping_region_options() {\r\n\r\n    const $shipping_zone: JQuery = $(this),\r\n        $condition_block: JQuery = $shipping_zone.closest( \".condition-field\" ),\r\n        $shipping_region: JQuery = $condition_block.find( \"select.condition-value\" ),\r\n        zone_id: string          = $shipping_zone.val() + \"\";\r\n\r\n    if ( ! zone_id ) return;\r\n\r\n    const regions: any      = $condition_block.data( 'regions' ),\r\n        region_labels: any  = $( module_block ).data( 'shipping_regions' ),\r\n        region_options: any = $condition_block.data( 'zones' )[ zone_id ][ 'regions' ];\r\n\r\n    $shipping_region.val( null ).find( 'option' ).remove();\r\n\r\n    if ( typeof region_options != \"object\" || ! region_options.length ) return;\r\n\r\n    for ( let code of region_options ) {\r\n\r\n        const optionObj: HTMLOptionElement = new Option( region_labels[ code ] , code );\r\n        $shipping_region.append( optionObj );\r\n    }\r\n\r\n    $shipping_region.val( regions ).trigger( 'change' );\r\n}","declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Toggle overlay block.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param object overlay Overlay html element.\r\n * @param string type    Toggle type (show/hide).\r\n */\r\nexport function toggle_overlay(overlay: HTMLElement, type: string = \"\"): void {\r\n  if (!type) type = \"show\";\r\n\r\n  let display = type === \"show\" ? \"block\" : \"none\";\r\n  jQuery(overlay).css(\"display\", display);\r\n}\r\n\r\n/**\r\n * Escape string to be used on an attribute.\r\n *\r\n * @since 1.0.0\r\n * @param string text String to escape.\r\n */\r\nexport function esc_attr(text: string): string {\r\n  const map: any = {\r\n    \"&\": \"&amp;\",\r\n    \"<\": \"&lt;\",\r\n    \">\": \"&gt;\",\r\n    '\"': \"&quot;\",\r\n    \"'\": \"&#039\",\r\n  };\r\n\r\n  return text.replace(/[&<>\"']/g, (m) => map[m]);\r\n}\r\n\r\n/**\r\n * Remove leading zeros from an input field.\r\n *\r\n * @since 1.2\r\n */\r\nexport function remove_leading_zeros() {\r\n  const { decimal_separator } = acfw_edit_coupon;\r\n\r\n  const $input: JQuery = jQuery(this);\r\n  let value: string = $input.val() + \"\";\r\n\r\n  if (value == \"0\" + decimal_separator) $input.val(\"0\");\r\n  if (value == \"0\" || value.substring(0, 2) == \"0\" + decimal_separator) return;\r\n\r\n  value = value.replace(/^0+/, \"\");\r\n  value = value.substring(0, 1) == decimal_separator ? \"0\" + value : value;\r\n\r\n  $input.val(value);\r\n}\r\n\r\n/**\r\n * Array to select options markup.\r\n *\r\n * @param options\r\n * @param value\r\n * @param key\r\n * @param label\r\n */\r\nexport function array_to_select_options(\r\n  options: any,\r\n  value: string,\r\n  key: string = \"value\",\r\n  label: string = \"label\"\r\n): string {\r\n  return options\r\n    .map(\r\n      (option: any) =>\r\n        `<option value=\"${option[key]}\" ${\r\n          option[key] == value ? \"selected\" : \"\"\r\n        }>${option[label]}</option>`\r\n    )\r\n    .toString()\r\n    .replace(/>,</g, \"><\");\r\n}\r\n\r\n/**\r\n * Get allowed minimum value.\r\n *\r\n * @since 1.0.0\r\n * @since 1.2   Remove unused property.\r\n *\r\n * @param {string} condition\r\n */\r\nexport function get_allowed_minimum_value(condition: string): number {\r\n  return condition == \"<\" ? 1 : 0;\r\n}\r\n\r\n/**\r\n * Compare option values to mark option as selected.\r\n *\r\n * @param value_1\r\n * @param value_2\r\n */\r\nexport function selected(value_1: string, value_2: string) {\r\n  return value_1 == value_2 ? \"selected\" : \"\";\r\n}\r\n\r\nexport function selected_multiple(array: any[], value: string) {\r\n  return array.indexOf(value) >= 0 ? \"selected\" : \"\";\r\n}\r\n\r\n/**\r\n * Get discount type select options markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param value\r\n */\r\nexport function discount_type_options(\r\n  value: string = \"\",\r\n  show_nodiscount: boolean = false\r\n): string {\r\n  const {\r\n    nodiscount,\r\n    override,\r\n    percent,\r\n    fixed,\r\n  } = acfw_edit_coupon.discount_field_options;\r\n  const nodiscount_markup = `<option value=\"nodiscount\" ${selected(\r\n    value,\r\n    \"nodiscount\"\r\n  )}>= : ${nodiscount}</option>`;\r\n\r\n  return `\r\n        ${show_nodiscount ? nodiscount_markup : \"\"}\r\n        <option value=\"override\" ${selected(\r\n          value,\r\n          \"override\"\r\n        )}>$ : ${override}</option>\r\n        <option value=\"percent\" ${selected(\r\n          value,\r\n          \"percent\"\r\n        )}>% : ${percent}</option>\r\n        <option value=\"fixed\" ${selected(value, \"fixed\")}>-$ : ${fixed}</option>\r\n    `;\r\n}\r\n\r\n/**\r\n * Get condition options markup.\r\n *\r\n * @sinc 1.15\r\n * @param condition\r\n */\r\nexport function condition_options(condition: string = \"\"): string {\r\n  const {\r\n    exactly,\r\n    anyexcept,\r\n    morethan,\r\n    lessthan,\r\n  } = acfw_edit_coupon.condition_field_options;\r\n\r\n  return `\r\n        <option value=\"=\" ${selected(condition, \"=\")}>${exactly}</option>\r\n        <option value=\"!=\" ${selected(condition, \"!=\")}>${anyexcept}</option>\r\n        <option value=\">\" ${selected(condition, \">\")}>${morethan}</option>\r\n        <option value=\"<\" ${selected(condition, \"<\")}>${lessthan}</option>\r\n    `;\r\n}\r\n\r\n/**\r\n * Validate url.\r\n *\r\n * @since 1.15\r\n */\r\nexport function validate_url(url: string): boolean {\r\n  const pattern = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\r\n\r\n  return pattern.test(url);\r\n}\r\n\r\n/**\r\n * Format price string to float.\r\n *\r\n * @since 1.3.3\r\n */\r\nexport function price_to_float(price: string): number {\r\n  const { decimal_separator } = acfw_edit_coupon;\r\n  return parseFloat(price.replace(decimal_separator, \".\"));\r\n}\r\n","import { selected } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Return logic template markup.\r\n * \r\n * @since 1.15\r\n */\r\nexport default function condition_logic_template( value: string = \"\" ): string {\r\n\r\n    const { logic_field_options } = acfw_edit_coupon;\r\n    const { and , or } = logic_field_options;\r\n    \r\n    return `\r\n        <div class=\"condition-group-logic\">\r\n            <div class=\"field-control\">\r\n                <select class=\"cgroup-logic\">\r\n                    <option value=\"and\" ${ selected( value , \"and\" ) }>${ and }</option>\r\n                    <option value=\"or\" ${ selected( value , \"or\" ) }>${ or }</option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n    `;\r\n}","declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Return condition group template markup.\r\n * \r\n * @since 1.15\r\n */\r\nexport default function condition_group_template( fields_markup: string = \"\" ): string {\r\n\r\n    const { empty_cart_conditions_field } = acfw_edit_coupon;\r\n    const cgroup_actions:string           = jQuery( \".cgroup-actions-template\" ).html();\r\n    const empty_conditions_markup: string = `<div class=\"empty-conditions\">${ empty_cart_conditions_field }</div>`;\r\n\r\n\r\n    return `\r\n        <div class=\"condition-group ${ ! fields_markup ? \"new\" : \"\" }\">\r\n            <a class=\"remove-condition-group\" href=\"javascript:void(0);\">\r\n                <i class=\"dashicons dashicons-trash\"></i>\r\n            </a>\r\n            <div class=\"condition-group-fields\">\r\n                ${ fields_markup ? fields_markup : empty_conditions_markup }\r\n            </div>\r\n            ${ cgroup_actions }\r\n        </div>\r\n    `;\r\n}","import { toggle_editing_mode } from \"./toggles\";\r\nimport condition_logic_template from \"./templates/condition_logic\";\r\nimport condition_group_template from \"./templates/condition_group\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nvar $: any = jQuery;\r\n\r\n/**\r\n * Add condition group callback.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function add_condition_group() {\r\n\r\n    const condition_groups: HTMLElement = document.querySelector( \"#acfw_cart_conditions .condition-data-wrap .condition-groups\" );\r\n\r\n    if ( $( condition_groups ).find( \".condition-group\" ).length )\r\n        $( condition_groups ).append( condition_logic_template( \"or\" ) );\r\n\r\n    $( condition_groups ).find( \".no-condition-group\" ).remove();\r\n    $( condition_groups ).append( condition_group_template() );\r\n\r\n    $(this).blur();\r\n    $( condition_groups ).find( \".condition-group.new .add-condition-trigger\" ).trigger( \"click\" );\r\n    $( condition_groups ).find( \".condition-group\" ).removeClass( \"new\" );\r\n\r\n    toggle_editing_mode( true );\r\n}\r\n\r\n/**\r\n * Remove condition group callback.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function remove_condition_group() {\r\n\r\n    const $button: JQuery         = $( this ),\r\n        module_block: HTMLElement = document.querySelector( \"#acfw_cart_conditions\" ),\r\n        $condition_group: JQuery  = $button.closest( \".condition-group\" ),\r\n        $cgroup_logic: JQuery     = $condition_group.index() == 0 ? $condition_group.next( \".condition-group-logic\" ) : $condition_group.prev( \".condition-group-logic\" );\r\n\r\n    const { no_condition_group_msg } = acfw_edit_coupon;\r\n\r\n    $condition_group.remove();\r\n    $cgroup_logic.remove();\r\n\r\n    if ( $( module_block ).find( \".condition-group\" ).length < 1 ) {\r\n\r\n        $( module_block ).find( \".condition-groups\" ).append(`\r\n            <div class=\"no-condition-group\">\r\n                ${ no_condition_group_msg }\r\n            </div>\r\n        `);\r\n    }\r\n\r\n    toggle_editing_mode( true );\r\n}","import { selected } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Return logic template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nexport default function logic_template( value: string = \"\" ): string {\r\n\r\n    const { logic_field_options } = acfw_edit_coupon;\r\n    const { and , or } = logic_field_options;\r\n\r\n    return `<div class=\"logic-condition-field condition-field\" data-type=\"logic\">\r\n        <div class=\"field-control\">\r\n            <select class=\"condition-logic\">\r\n                <option value=\"and\" ${ selected( value , \"and\" ) }>${ and }</option>\r\n                <option value=\"or\" ${ selected( value , \"or\" ) }>${ or }</option>\r\n            </select>\r\n        </div>\r\n    </div>`;\r\n}","import { selected_multiple } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\nconst { cart_condition_fields , condition_field_options } = acfw_edit_coupon;\r\n\r\n/**\r\n * Return product category condition field template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nexport default function product_category_template( data: any ): string {\r\n\r\n    const { value: categories , condition , quantity } = data;\r\n    const { title, placeholder, field } = cart_condition_fields.product_category;\r\n    const { field: quantityLabel } = cart_condition_fields.cart_quantity;\r\n    const { condition_label } = acfw_edit_coupon;\r\n    const { exactly, anyexcept, morethan, lessthan } = condition_field_options;\r\n\r\n    const condOption = condition ? condition : \">\";\r\n\r\n    return `\r\n    <div class=\"product-category-field condition-field\" data-type=\"product-category\">\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${ title }</h3>\r\n        <div class=\"field-control categories\">\r\n            <label>${ field }</label>\r\n            <select class=\"condition-value wc-enhanced-select\" multiple data-placeholder=\"${ placeholder }\">\r\n                ${ category_options( categories ) }\r\n            </select>\r\n        </div>\r\n        <div class=\"field-control condition\">\r\n            <label>${ condition_label }</label>\r\n            <select class=\"condition-select\">\r\n                <option value=\"=\" ${ condOption == \"=\" ? \"selected\" : \"\" }>${ exactly }</option>\r\n                <option value=\"!=\" ${ condOption == \"!=\" ? \"selected\" : \"\" }>${ anyexcept }</option>\r\n                <option value=\">\" ${ condOption == \">\" ? \"selected\" : \"\" }>${ morethan }</option>\r\n                <option value=\"<\" ${ condOption == \"<\" ? \"selected\" : \"\" }>${ lessthan }</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"field-control quantity\">\r\n            <label>${ quantityLabel }</label>\r\n            <input type=\"number\" class=\"condition-quantity\" value=\"${ typeof quantity ? quantity : 0 }\" min=\"${ condition == \"<\" ? 1 : 0 }\">\r\n        </div>\r\n    </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Get category options markup.\r\n * \r\n * @since 1.15\r\n * \r\n * @param data \r\n */\r\nfunction category_options( data: number[] = [] ): string {\r\n\r\n    const { options } = cart_condition_fields.product_category;\r\n    let markup: string = '';\r\n\r\n    for ( let x in options ) {\r\n        markup += `<option value=\"${ x }\" ${ selected_multiple( data , x ) }>${ options[x] }</option>`\r\n    }\r\n        \r\n    return markup;\r\n}","import { selected } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\nconst { cart_condition_fields } = acfw_edit_coupon;\r\n\r\n/**\r\n * Return customer logged in status condition field template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nexport default function customer_logged_in_status_template( data:string ): string {\r\n\r\n    const { title } = cart_condition_fields.customer_logged_in_status;\r\n\r\n    return `\r\n        <div class=\"customer-logged-in-status-field condition-field\" data-type=\"customer-logged-in-status\">\r\n\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n\r\n        <h3 class=\"condition-field-title\">${ title }</h3>\r\n\r\n        <div class=\"field-control\">\r\n            <select class=\"condition-value\">\r\n                ${ get_options( data ) }\r\n            </select>\r\n        </div>\r\n    </div>`;\r\n}\r\n\r\n/**\r\n * Get condition field options.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nfunction get_options( data: string ): string {\r\n\r\n    const { options } = cart_condition_fields.customer_logged_in_status;\r\n    let markup = '';\r\n\r\n    for ( let x in options ) {\r\n        markup += `<option value=\"${ x }\" ${ selected( x , data ) }>${ options[ x ] }</option>`;\r\n    }\r\n\r\n    return markup;\r\n}","import { selected_multiple } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\nconst { cart_condition_fields } = acfw_edit_coupon;\r\n\r\n/**\r\n * Return customer user role condition field template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nexport default function customer_user_role_template( data: string[] ): string {\r\n\r\n    const { title , placeholder } = cart_condition_fields.customer_user_role;\r\n\r\n    return `\r\n        <div class=\"customer-user-role-field condition-field\" data-type=\"customer-user-role\">\r\n            <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n            <h3 class=\"condition-field-title\">${ title }</h3>\r\n            <div class=\"field-control\">\r\n                <select class=\"wc-enhanced-select condition-value\" multiple data-placeholder=\"${ placeholder }\">\r\n                    ${ get_options( data ) }\r\n                </select>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Get condition field options markup.\r\n * \r\n * @since 1.15\r\n * \r\n * @param data \r\n */\r\nfunction get_options( data: string[] ) {\r\n\r\n    const { user_role_options } = acfw_edit_coupon;\r\n    let markup = '';\r\n    \r\n    for ( let x in user_role_options )\r\n        markup += `<option value=\"${ x }\" ${ selected_multiple( data , x ) }>${ user_role_options[x] }</option>`;\r\n\r\n    return markup;\r\n}","import { selected_multiple } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\nconst { cart_condition_fields } = acfw_edit_coupon;\r\n\r\n/**\r\n * Return disallowed customer user role condition field template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nexport default function disallowed_customer_user_role_template( data: string[] ): string {\r\n\r\n    const { title , placeholder } = cart_condition_fields.disallowed_customer_user_role;\r\n\r\n    return `\r\n        <div class=\"disallowed-customer-user-role-field condition-field\" data-type=\"disallowed-customer-user-role\">\r\n            <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n            <h3 class=\"condition-field-title\">${ title }</h3>\r\n            <div class=\"field-control\">\r\n                <select class=\"wc-enhanced-select condition-value\" multiple data-placeholder=\"${ placeholder }\">\r\n                    ${ get_options( data ) }\r\n                </select>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Get condition field options markup.\r\n * \r\n * @since 1.15\r\n * \r\n * @param data\r\n */\r\nfunction get_options( data: string[] ) {\r\n\r\n    const { user_role_options } = acfw_edit_coupon;\r\n    let markup = '';\r\n    \r\n    for ( let x in user_role_options )\r\n        markup += `<option value=\"${ x }\" ${ selected_multiple( data , x ) }>${ user_role_options[x] }</option>`;\r\n\r\n    return markup;\r\n}","import { condition_options } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\nconst { cart_condition_fields } = acfw_edit_coupon;\r\n\r\n/**\r\n * Return cart quantity condition field template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nexport default function cart_quantity_template( data: any ): string {\r\n\r\n    const { condition , value } = data;\r\n    const { title, desc, field } = cart_condition_fields.cart_quantity;\r\n    const { condition_label } = acfw_edit_coupon;\r\n\r\n    return `\r\n    <div class=\"cart-quantity-field condition-field\" data-type=\"cart-quantity\">\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${ title }</h3>\r\n        <label>${ desc }</label>\r\n        <div class=\"field-control\">\r\n            <label>${ condition_label }</label>\r\n            <select class=\"condition-select\">\r\n                ${ condition_options( condition ) }\r\n            </select>\r\n        </div>\r\n        <div class=\"field-control\">\r\n            <label>${ field }</label>\r\n            <input class=\"condition-value\" type=\"number\" min=\"0\" value=\"${ value >= 0 ? value : \"\" }\">\r\n        </div>\r\n    </div>\r\n    `;\r\n}","import { toggle_overlay } from \"../helper\";\r\nimport { toggle_editing_mode } from \"./toggles\";\r\n\r\n// templates\r\nimport logic_template from \"./templates/logic\";\r\nimport product_category_template from \"./templates/product_category\";\r\nimport customer_logged_in_status_template from \"./templates/customer_logged_in_status\";\r\nimport customer_user_role_template from \"./templates/customer_user_role\";\r\nimport disallowed_customer_user_role_template from \"./templates/disallowed_customer_user_role\";\r\nimport cart_quantity_template from \"./templates/cart_quantity\";\r\nimport cart_subtotal_template from \"./templates/cart_subtotal\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nconst { cart_condition_fields , premium_cart_condition_fields , upsell } = acfw_edit_coupon;\r\n\r\n/**\r\n * Add condition field.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function add_condition_field(): void {\r\n\r\n    const $button: JQuery         = $( this ),\r\n        $condition_type: JQuery   = $button.closest( \".condition-group-actions\" ).find( \"select.condition-types\" ),\r\n        $condition_group: JQuery  = $button.closest( \".condition-group\" ),\r\n        $condition_fields: JQuery = $condition_group.find( \".condition-group-fields\" ),\r\n        overlay: HTMLElement      = document.querySelector( \"#acfw_cart_conditions .acfw-overlay\" );\r\n\r\n    const condition_type: string = $condition_type.val() + '';\r\n    const fields_count: number   = $condition_fields.find( \".condition-field,.condition-set\" ).length;\r\n\r\n    toggle_overlay( overlay , \"show\" );\r\n\r\n    const condition_field_markup: string = get_condition_field( condition_type , null , fields_count );\r\n\r\n    if ( premium_cart_condition_fields && premium_cart_condition_fields.indexOf( condition_type ) > -1 ) { // upsell\r\n        vex.dialog.alert( { unsafeMessage : upsell.cart_condition_field } );\r\n    } else if ( condition_field_markup ) {\r\n\r\n        $condition_fields.find( \".empty-conditions\" ).remove();\r\n        $condition_fields.show().append( condition_field_markup );\r\n        $condition_fields.find( `.${ condition_type }-field` ).find(\"input,select\").trigger(\"change\");\r\n        $( \"body\" ).trigger( \"wc-enhanced-select-init\" );\r\n\r\n        toggle_editing_mode( true );\r\n\r\n    } else\r\n        vex.dialog.alert( acfw_edit_coupon.fail_add_condition_field );\r\n\r\n\r\n    toggle_overlay( overlay , \"hide\" );\r\n\r\n    $condition_group.find( \".condition-group-actions .add-condition-form\" ).hide();\r\n    $condition_group.find( \".condition-group-actions .add-condition-trigger\" ).show();\r\n\r\n}\r\n\r\n/**\r\n * Remove condition field.\r\n * \r\n * @since 1.0.0\r\n */\r\nexport function remove_condition_field(): void {\r\n\r\n    const $button: JQuery        = $( this ),\r\n        $condition_field: JQuery = $button.closest( \".condition-field,.condition-set\" ),\r\n        $condition_group: JQuery = $condition_field.closest( \".condition-group\" ),\r\n        $cfield_logic: JQuery    = $condition_field.index() == 0 ? $condition_field.next( \".logic-condition-field\" ) : $condition_field.prev( \".logic-condition-field\" );\r\n\r\n    const { empty_cart_conditions_field } = acfw_edit_coupon;\r\n\r\n    $condition_field.remove();\r\n    $cfield_logic.remove();\r\n\r\n    if ( $condition_group.find( \".condition-field,.condition-set\" ).length < 1 ) {\r\n\r\n        $condition_group.find( \".condition-group-fields\" ).append(`\r\n            <div class=\"empty-conditions\">\r\n                ${ empty_cart_conditions_field }\r\n            </div>\r\n        `);\r\n    }\r\n\r\n    toggle_editing_mode( true );\r\n}\r\n\r\n/**\r\n * Get condition field markup.\r\n * \r\n * @param condition_type string\r\n * @param fields_count number\r\n * @return string\r\n */\r\nexport function get_condition_field( condition_type: string , data: any = null, fields_count: number = 0 ): string {\r\n\r\n    let markup: string = '';\r\n    switch( condition_type ) {\r\n\r\n        case \"product-category\" :\r\n            data = data ? data : {};\r\n\r\n            // if data is an array (old format) then we build \r\n            if ( data.length )\r\n                data = { condition: \">\", value: data, quantity: 0 };\r\n\r\n            markup += product_category_template( data );\r\n            break;\r\n\r\n        case \"customer-logged-in-status\" :\r\n            markup += customer_logged_in_status_template( data );\r\n            break;\r\n\r\n        case \"customer-user-role\" :\r\n            data = data ? data : [];\r\n            markup += customer_user_role_template( data );\r\n            break;\r\n\r\n        case \"disallowed-customer-user-role\" :\r\n            data = data ? data : [];\r\n            markup += disallowed_customer_user_role_template( data );\r\n            break;\r\n\r\n        case \"cart-quantity\" :\r\n            data = data ? data : {};\r\n            markup += cart_quantity_template( data );\r\n            break;\r\n\r\n        case \"cart-subtotal\" :\r\n            data = data ? data : {};\r\n            markup += cart_subtotal_template( data );\r\n            break;\r\n\r\n        default :\r\n            const field_key: string = condition_type.replace( /-/g, '_' );\r\n            if ( cart_condition_fields[ field_key ] ) {\r\n                \r\n                const { template_callback , default_data_value } = cart_condition_fields[ field_key ];\r\n                if ( default_data_value ) data = data ? data : default_data_value;\r\n                \r\n                markup += template_callback( data , field_key );\r\n            }\r\n            break;\r\n    }\r\n\r\n    return markup && fields_count ? logic_template() + markup : markup;\r\n}\r\n\r\n/**\r\n * Check if condition field type is supported.\r\n * \r\n * @param type string\r\n */\r\nexport function is_condition_field( type: string ) {\r\n\r\n    return acfw_edit_coupon.cart_conditon_field_options.indexOf( type ) > -1;\r\n}","import { condition_options } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Return cart subtotal condition field template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nexport default function cart_subtotal_template(data: any): string {\r\n  const { condition, value } = data;\r\n  const { cart_condition_fields, condition_label } = acfw_edit_coupon;\r\n  const { title, desc, field } = cart_condition_fields.cart_subtotal;\r\n\r\n  return `\r\n    <div class=\"cart-subtotal-field condition-field\" data-type=\"cart-subtotal\">\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${title}</h3>\r\n        <label>${desc}</label>\r\n        <div class=\"field-control\">\r\n            <label>${condition_label}</label>\r\n            <select class=\"condition-select\">\r\n                ${condition_options(condition)}\r\n            </select>\r\n        </div>\r\n        <div class=\"field-control\">\r\n            <label>${field}</label>\r\n            <input class=\"condition-value wc_input_price\" type=\"text\" value=\"${\r\n              value ? value : \"\"\r\n            }\">\r\n        </div>\r\n    </div>\r\n    `;\r\n}\r\n","declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst { cart_condition_fields } = acfw_edit_coupon;\r\n\r\n/**\r\n * Scrape condition group data.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function scrape_condition_group_data(condition_group: Element): any {\r\n  const condition_fields: NodeList = condition_group.querySelectorAll(\r\n    \".condition-set,.condition-field\"\r\n  );\r\n  let fields: any[] = [];\r\n\r\n  if (condition_group.classList.contains(\"condition-group-logic\"))\r\n    return {\r\n      type: \"group_logic\",\r\n      value: condition_group.querySelector(\"select\").value,\r\n    };\r\n\r\n  condition_fields.forEach((condition_field: HTMLElement) =>\r\n    fields.push(scrape_condition_field_data(condition_field))\r\n  );\r\n\r\n  return fields.length ? { type: \"group\", fields: fields } : null;\r\n}\r\n\r\n/**\r\n * Scrape condition field data.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function scrape_condition_field_data(condition_field: HTMLElement): any {\r\n  const { type } = condition_field.dataset;\r\n  let field_data: any = { type: type, data: null };\r\n  let temp: any, temp2: any, temp3: any, temp4: any;\r\n\r\n  switch (type) {\r\n    case \"logic\":\r\n      temp = condition_field.querySelector(\"select.condition-logic\");\r\n      field_data.data = temp.value;\r\n      break;\r\n\r\n    case \"product-category\":\r\n      temp = condition_field.querySelector(\".condition-value\");\r\n      temp2 = condition_field.querySelector(\".condition-select\");\r\n      temp3 = condition_field.querySelector(\".condition-quantity\");\r\n      field_data.data = {\r\n        condition: $(temp2).val(),\r\n        value: $(temp).val(),\r\n        quantity: $(temp3).val(),\r\n      };\r\n      break;\r\n\r\n    case \"customer-logged-in-status\":\r\n    case \"customer-user-role\":\r\n    case \"disallowed-customer-user-role\":\r\n      temp = condition_field.querySelector(\".condition-value\");\r\n      field_data.data = $(temp).val();\r\n      break;\r\n\r\n    case \"cart-quantity\":\r\n    case \"cart-subtotal\":\r\n      temp = condition_field.querySelector(\".condition-select\");\r\n      temp2 = condition_field.querySelector(\".condition-value\");\r\n      field_data.data = {\r\n        condition: $(temp).val(),\r\n        value:\r\n          type == \"cart-subtotal\" ? $(temp2).val() : parseInt($(temp2).val()),\r\n      };\r\n      break;\r\n\r\n    default:\r\n      const field_key: string = type.replace(/-/g, \"_\");\r\n      if (cart_condition_fields[field_key]) {\r\n        const { scraper_callback } = cart_condition_fields[field_key];\r\n\r\n        field_data.data = scraper_callback(condition_field);\r\n      }\r\n      break;\r\n  }\r\n\r\n  return field_data;\r\n}\r\n","import {\r\n  get_allowed_minimum_value,\r\n  toggle_overlay,\r\n  validate_url,\r\n} from \"../helper\";\r\nimport { toggle_editing_mode } from \"./toggles\";\r\nimport { scrape_condition_group_data } from \"./scrapers\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var ajaxurl: string;\r\ndeclare var woocommerce_admin_meta_boxes: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nconst { post_id } = woocommerce_admin_meta_boxes;\r\n\r\n/**\r\n * Save cart conditions.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function save_cart_conditions() {\r\n  const module_block: HTMLElement = document.querySelector(\r\n      \"#acfw_cart_conditions\"\r\n    ),\r\n    condition_groups: NodeList = module_block.querySelectorAll(\r\n      \".condition-groups .condition-group, .condition-groups .condition-group-logic\"\r\n    ),\r\n    overlay: HTMLElement = module_block.querySelector(\".acfw-overlay\");\r\n\r\n  const { post_status } = acfw_edit_coupon;\r\n  const { post_id } = woocommerce_admin_meta_boxes;\r\n\r\n  let form_data: any[] = [];\r\n\r\n  // remove product table edit form rows.\r\n  $(module_block)\r\n    .find(\".acfw-styled-table tr.add-edit-form button.cancel\")\r\n    .trigger(\"click\");\r\n\r\n  condition_groups.forEach((condition_group: HTMLElement) => {\r\n    const data = scrape_condition_group_data(condition_group);\r\n    if (data) form_data.push(data);\r\n  });\r\n\r\n  if (!validate_form_data(form_data)) {\r\n    vex.dialog.alert(acfw_edit_coupon.cart_conditions_invalid);\r\n\r\n    // Add save error flag class in #acfw_cart_conditions\r\n    $(module_block).addClass(\"save-error\");\r\n    return;\r\n  }\r\n\r\n  const notice_settings = {\r\n    message: $(module_block)\r\n      .find(\".text-input.non-qualifying-message-field\")\r\n      .val(),\r\n    btn_text: $(module_block)\r\n      .find(\".text-input.non-qualifying-btn-text-field\")\r\n      .val(),\r\n    btn_url: $(module_block)\r\n      .find(\".text-input.non-qualifying-btn-url-field\")\r\n      .val(),\r\n  };\r\n  const auto_apply_display = $(module_block)\r\n    .find(\".display-notice-auto-apply-field\")\r\n    .is(\":checked\")\r\n    ? \"yes\"\r\n    : \"\";\r\n\r\n  if (notice_settings.btn_url && !validate_url(notice_settings.btn_url)) {\r\n    vex.dialog.alert(acfw_edit_coupon.cart_notice_url_invalid);\r\n    $(module_block).addClass(\"save-error\");\r\n    return;\r\n  }\r\n\r\n  toggle_overlay(overlay, \"show\");\r\n\r\n  ajax_save(\r\n    {\r\n      cart_conditions: form_data,\r\n      notice_settings: notice_settings,\r\n      auto_apply_display: auto_apply_display,\r\n    },\r\n    (response: any) => {\r\n      if (response.status == \"success\") {\r\n        // if coupon is not published yet, then save it as draft.\r\n        if (post_status !== \"publish\") {\r\n          if (!$(\"input[name='post_title']\").val())\r\n            $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\r\n\r\n          $(\"select[name='post_status']\")\r\n            .append(new Option(\"Published\", \"publish\"))\r\n            .val(\"publish\");\r\n\r\n          $(\"#publishing-action\").append(`\r\n                    <input type=\"hidden\" name=\"publish\" value=\"Publish\">\r\n                `);\r\n          $(\"input#publish\").click();\r\n        }\r\n      } else {\r\n        if (response.error_msg) vex.dialog.alert(response.error_msg);\r\n      }\r\n\r\n      toggle_editing_mode(false);\r\n      $(module_block).find(\"#save-cart-conditions\").prop(\"disabled\", true);\r\n      toggle_overlay(overlay, \"hide\");\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Save on coupon publish.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function save_on_coupon_publish(e: any) {\r\n  const module_block: HTMLElement = document.querySelector(\r\n    \"#acfw_cart_conditions\"\r\n  );\r\n\r\n  if (!$(module_block).data(\"editing\")) return;\r\n\r\n  e.preventDefault();\r\n  $(module_block).find(\"#save-cart-conditions\").trigger(\"click\");\r\n\r\n  // delay for 1 second to give time for\r\n  setTimeout(() => {\r\n    // If Cart Condition displays an error message then don't save the coupon\r\n    if ($(module_block).hasClass(\"save-error\"))\r\n      $(module_block).removeClass(\"save-error\");\r\n    else $(\"form#post\").submit();\r\n  }, 1000);\r\n}\r\n\r\n/**\r\n * Trigger AJAX save.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param form_data\r\n * @param callback\r\n * @return jQuery AJAX\r\n */\r\nfunction ajax_save(data: any, callback: CallableFunction) {\r\n  data.action = \"acfw_save_cart_conditions\";\r\n  data.coupon_id = post_id;\r\n\r\n  return $.post(ajaxurl, data, callback, \"json\");\r\n}\r\n\r\n/**\r\n * Validate cart conditions form data.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction validate_form_data(form_data: any[]): boolean {\r\n  let group, field, data, type, objects, condition, value, min;\r\n\r\n  // return true if form data has a single empty group (initial layout).\r\n  if (form_data.length === 1 && form_data[0].fields.length < 1) return true;\r\n\r\n  for (group of form_data) {\r\n    // skip validation for group logic fields.\r\n    if (group[\"type\"] === \"group_logic\") continue;\r\n\r\n    // invalidate if no fields detected.\r\n    if (group[\"fields\"] === undefined || group[\"fields\"].length < 1)\r\n      return false;\r\n\r\n    for (field of group[\"fields\"]) {\r\n      type = field[\"type\"];\r\n      data = field[\"data\"];\r\n\r\n      // invalidate if atleast a single field has invalid data.\r\n      if (data === undefined || data === \"\" || data === null) return false;\r\n\r\n      if (typeof data == \"object\" && typeof data.length == \"number\")\r\n        // product quantities field validation\r\n        objects = data;\r\n      else if (type === \"product-category\") {\r\n        // product category validation\r\n\r\n        objects = data[\"value\"];\r\n        condition = data[\"condition\"];\r\n        value = data[\"quantity\"];\r\n      } else if (typeof data == \"object\" && data.length === undefined) {\r\n        // has ordered before validation\r\n\r\n        objects = data[\"products\"];\r\n        condition = data[\"condition\"];\r\n        value = data[\"value\"];\r\n      } else value = data;\r\n\r\n      min = get_allowed_minimum_value(condition);\r\n\r\n      if (\r\n        (objects !== undefined && objects.length < 1) ||\r\n        (condition !== undefined && !condition) ||\r\n        (!Number.isInteger(value) && value !== undefined && !value) ||\r\n        (Number.isInteger(value) && value < min) ||\r\n        (typeof value == \"number\" && value < min)\r\n      )\r\n        return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n","import { esc_attr } from \"../helper\";\r\nimport { toggle_editing_mode } from \"./toggles\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nconst { \r\n    product_table_buttons,\r\n    condition_field_options,\r\n    bogo_form_fields,\r\n\r\n} = acfw_edit_coupon;\r\n\r\n/**\r\n * Trigger the add table row form event.\r\n * \r\n * @since 1.1.0\r\n */\r\nexport function trigger_add_table_row_form() {\r\n\r\n    const $button: JQuery = $(this),\r\n        $table: JQuery    = $button.closest( \".acfw-styled-table\" ),\r\n        $tbody: JQuery    = $table.find( \"tbody\" ),\r\n        exclude: number[] = $table.data( \"exclude\" );\r\n\r\n    $tbody.find( \"tr.no-result\" ).remove();\r\n\r\n    $tbody.append( get_add_edit_form_row_markup( exclude ) );\r\n    $( \"body\" ).trigger( \"wc-enhanced-select-init\" );\r\n}\r\n\r\n/**\r\n * Trigger the edit table row form event.\r\n * \r\n * @since 1.1.0\r\n */\r\nexport function trigger_edit_table_row_form() {\r\n\r\n    const $button: JQuery = $(this),\r\n        $row: JQuery      = $button.closest( \"tr\" ),\r\n        $table: JQuery    = $button.closest( \"table\" ),\r\n        $tbody: JQuery    = $row.closest( \"tbody\" ),\r\n        data: any         = $row.find( \"td.product\" ).data( \"product\" );\r\n\r\n    let exclude: number[] = $table.data( \"exclude\" );\r\n\r\n    exclude.splice( exclude.indexOf( data.product_id ) , 1 );\r\n    $tbody.find( \"tr.no-result\" ).remove();\r\n    $row.replaceWith( get_add_edit_form_row_markup( exclude , data ) );\r\n    $table.data( \"exclude\" , exclude );\r\n    $table.find( \".wc-product-search\" ).data( \"exclude\" , exclude );\r\n    $( \"body\" ).trigger( \"wc-enhanced-select-init\" );\r\n}\r\n\r\n/**\r\n * Actual function that saves/edits the table row.\r\n * \r\n * @since 1.1.0\r\n */\r\nexport function add_edit_table_row() {\r\n\r\n    const $button:JQuery  = $(this),\r\n        $row:JQuery       = $button.closest( \"tr\" ),\r\n        $table:JQuery     = $button.closest( \"table.acfw-styled-table\" ),\r\n        $search:JQuery    = $row.find( \".wc-product-search\" ),\r\n        $condition:JQuery = $row.find( \".condition-select\" ),\r\n        $quantity:JQuery  = $row.find( \".condition-quantity\" ),\r\n        minimum: number   = $condition.val() === \"<\" ? 1 : 0;\r\n\r\n    let exclude:any = $table.data( \"exclude\" );\r\n\r\n    if ( ! $search.val() || ! $condition.val() || ! $quantity.val() || $quantity.val() < minimum ) {\r\n        vex.dialog.alert( acfw_edit_coupon.fill_form_propery_error_msg );\r\n        return;\r\n    }\r\n\r\n    const data:any = {\r\n        product_id    : parseInt( $search.val() + '' ),\r\n        condition     : $condition.val(),\r\n        quantity      : parseInt( $quantity.val() + '' ),\r\n        product_label : $search.find( \"option:selected\" ).text(),\r\n        condition_label : $condition.find( \"option:selected\" ).text()\r\n    };\r\n\r\n    let markup:string = `\r\n        <tr>\r\n            <td class=\"product\" data-product=\"${ esc_attr( JSON.stringify( data ) ) }\">${ data.product_label }</td>\r\n            <td class=\"condition\">${ data.condition_label }</td>\r\n            <td class=\"quantity\">${ data.quantity }</td>\r\n            <td class=\"actions\">\r\n                <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\r\n                <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\r\n            </td>\r\n        </tr>\r\n    `;\r\n\r\n    exclude.push( data.product_id );\r\n    $row.replaceWith( markup );\r\n    $table.data( \"exclude\" , exclude );\r\n    $table.find( \".wc-product-search\" ).data( \"exclude\" , exclude );\r\n    toggle_editing_mode( true );\r\n}\r\n\r\n/**\r\n * Trigger the cancel add/edit table row form event.\r\n * \r\n * @since 1.1.0\r\n */\r\nexport function cancel_add_edit_table_row() {\r\n\r\n    const $button: JQuery = jQuery(this),\r\n        $row: JQuery      = $button.closest( \"tr\" ),\r\n        $table: JQuery    = $button.closest( \"table\" ),\r\n        $tbody: JQuery    = $row.closest( \"tbody\" ),\r\n        data: any         = $row.find( \"td.product\" ).data( \"product\" ),\r\n        colspan: number   = $row.find( \"td\" ).length;\r\n\r\n    let exclude: number[] = $table.data( \"exclude\" );\r\n\r\n    if ( typeof data == \"object\" ) {\r\n\r\n        const { product_id , product_label , condition_label , quantity } = data;\r\n\r\n        let markup = `\r\n            <tr>\r\n                <td class=\"product\" data-product=\"${ esc_attr( JSON.stringify( data ) ) }\">${ product_label }</td>\r\n                <td class=\"condition\">${ condition_label }</td>\r\n                <td class=\"quantity\">${ quantity }</td>\r\n                <td class=\"actions\">\r\n                    <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\r\n                    <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\r\n                </td>\r\n            </tr>\r\n        `;\r\n\r\n        exclude.push( product_id );\r\n        $row.replaceWith( markup );\r\n        $table.data( \"exclude\" , exclude );\r\n        $table.find( \".wc-product-search\" ).data( \"exclude\" , exclude );\r\n\r\n    } else {\r\n\r\n        $row.remove();\r\n        append_blank_placeholder_table_row( $tbody , colspan );\r\n    }\r\n}\r\n\r\n/**\r\n * Remove product in table.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function product_table_remove_product() {\r\n\r\n    const $button: JQuery = jQuery( this ),\r\n        $row: JQuery      = $button.closest( \"tr\" ),\r\n        $table: JQuery    = $row.closest( \"table\" ),\r\n        $tbody: JQuery    = $table.find( \"tbody\" ),\r\n        colspan: number   = $row.find( \"td\" ).length;\r\n\r\n    $row.remove();\r\n\r\n    let data: any         = $row.find( \"td.product\" ).data( \"product\" ),\r\n        exclude: number[] = $table.data( \"exclude\" ),\r\n        index: number     = exclude.indexOf( parseInt( data.product_id ) );\r\n\r\n    if ( index !== -1 ) exclude.splice( index , 1 );\r\n    $table.data( \"exclude\" , exclude );\r\n    $table.find( \".wc-product-search\" ).data( \"exclude\" , exclude );\r\n\r\n    append_blank_placeholder_table_row( $tbody , colspan );\r\n    toggle_editing_mode( true );\r\n}\r\n\r\n/**\r\n * Append blank placeholder row on tables that are empty.\r\n * \r\n * @param {object} $tbody  Table tbody jQuery object.\r\n * @param {int}    colspan Number of row columns.\r\n */\r\nfunction append_blank_placeholder_table_row( $tbody: JQuery , colspan: number = 3 ) {\r\n\r\n    if ( $tbody.find( \"tr\" ).length > 0 ) return;\r\n\r\n    $tbody.append(`\r\n        <tr class=\"no-result\">\r\n            <td colspan=\"${ colspan }\">${ acfw_edit_coupon.no_products_added }</td>\r\n        </tr>\r\n    `);\r\n}\r\n\r\n/**\r\n * Get add/edit form row markup.\r\n * \r\n * @since 1.0.0\r\n * \r\n * @param {object} exclude Array of excluded product ids.\r\n * @param {object} data    Product data.\r\n * @return {string} Add/edit form row markup.\r\n */\r\nfunction get_add_edit_form_row_markup( exclude: number[] = [] , data: any = false ): string {\r\n\r\n    let prodOption: string = \"\",\r\n        condOption: string = \"\";\r\n\r\n    if ( typeof data == \"object\" ) {\r\n\r\n        const { product_id, product_label } = data;\r\n\r\n        prodOption = `<option value=\"${ product_id }\">${ product_label }</option>`;\r\n        condOption = data.condition;\r\n    }\r\n    \r\n    const { add , edit, cancel } = product_table_buttons;\r\n    const { exactly, anyexcept, morethan, lessthan } = condition_field_options;\r\n    const { type_to_search } = bogo_form_fields;\r\n\r\n    const btnText = typeof data == \"object\" ? edit : add,\r\n        markup    = `\r\n        <tr class=\"add-edit-form adding\">\r\n            <td class=\"product\" data-product=\"${ typeof data == \"object\" ? esc_attr( JSON.stringify(data) ) : 0 }\">\r\n                <div class=\"object-search-wrap\">\r\n                    <select class=\"product-in-cart wc-product-search\"\r\n                        data-placeholder=\"${ type_to_search }\"\r\n                        data-action=\"acfw_search_products\"\r\n                        data-exclude=\"${ esc_attr( JSON.stringify( exclude ) ) }\">${ prodOption }</select>\r\n                </div>\r\n            </td>\r\n            <td class=\"condition\">\r\n                <select class=\"condition-select\">\r\n                    <option value=\"=\" ${ condOption == \"=\" ? \"selected\" : \"\" }>${ exactly }</option>\r\n                    <option value=\"!=\" ${ condOption == \"!=\" ? \"selected\" : \"\" }>${ anyexcept }</option>\r\n                    <option value=\">\" ${ condOption == \">\" ? \"selected\" : \"\" }>${ morethan }</option>\r\n                    <option value=\"<\" ${ condOption == \"<\" ? \"selected\" : \"\" }>${ lessthan }</option>\r\n                </select>\r\n            </td>\r\n            <td class=\"quantity\">\r\n                <input type=\"number\" class=\"condition-quantity\" value=\"${ typeof data == \"object\" ? data.quantity : 1 }\" min=\"${ condOption == \"<\" ? 1 : 0 }\">\r\n            </td>\r\n            <td class=\"actions\">\r\n                <button type=\"button\" class=\"condition-product-add button-primary\">${ btnText }</button>\r\n                <button type=\"button\" class=\"cancel button\">${ cancel }</button>\r\n            </td>\r\n        </tr>\r\n        `;\r\n\r\n    return markup;\r\n}","import { get_allowed_minimum_value } from \"../helper\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\n\r\n/**\r\n * Restrict number input minimum value.\r\n * \r\n * @since 1.0.0\r\n */\r\nexport function restrict_number_min_value() {\r\n\r\n    const $input: JQuery = $( this ),\r\n        min: number      = parseInt( $input.attr( \"min\" ) ),\r\n        value: number    = parseFloat( $input.val() + \"\" );\r\n\r\n    if ( value < min ) $input.val( min );\r\n}\r\n\r\n/**\r\n * Restrict number input minimum value.\r\n * \r\n * @since 1.0.0\r\n */\r\nexport function update_input_minimum_value() {\r\n\r\n    const $select: JQuery  = $(this),\r\n        $field: JQuery     = $select.closest( \".condition-field,.condition-set\" ),\r\n        field_type: string = $field.data( \"type\" ),\r\n        selector: string   = field_type == \"product-quantity\" || field_type == \"has-ordered-before\" || field_type == \"product-category\" ? \"input.condition-quantity\" : \"input.condition-value\",\r\n        $input: JQuery     = $field.find( selector ),\r\n        condition: string  = $select.val() + \"\";\r\n\r\n    let min: number = get_allowed_minimum_value( condition );\r\n\r\n    $input.attr( \"min\" , min ).trigger( \"change\" );\r\n}\r\n\r\n/**\r\n * Updated has ordered before condition label.\r\n * \r\n * @since 1.0.0\r\n */\r\nexport function update_has_ordered_before_condition_label() {\r\n\r\n    const { within_a_period_label , number_of_orders_label } = acfw_edit_coupon;\r\n\r\n    const $select: JQuery = $( this ),\r\n        $field: JQuery    = $select.closest( \".cart-quantity-field\" ),\r\n        $label: JQuery    = $field.find( \".condition-type-value label\" );\r\n\r\n    if ( $select.val() == \"within-a-period\" )\r\n        $label.text( within_a_period_label );\r\n    else\r\n        $label.text( number_of_orders_label );\r\n}\r\n\r\n/**\r\n * Validate price field value on change.\r\n * \r\n * @since 1.2\r\n */\r\nexport function validate_price_field_value() {\r\n\r\n    const $input: JQuery         = $(this),\r\n        $condition_block: JQuery = $input.closest( \".condition-field\" ),\r\n        $condition_field: JQuery = $condition_block.find( \"select.condition-select\" ),\r\n        condition_type: string   = $condition_field.val() + \"\";\r\n\r\n    let input_price: string   = $input.val() + \"\",\r\n        minimum_price: number = get_allowed_minimum_value( condition_type );\r\n\r\n    if ( acfw_edit_coupon.decimal_separator !== \".\" )\r\n        input_price = input_price.replace( acfw_edit_coupon.decimal_separator , \".\" );\r\n\r\n    if ( ! $condition_field || parseFloat( input_price ) > minimum_price - 1 ) return;\r\n\r\n    $input.val( minimum_price );\r\n}\r\n\r\n/**\r\n * Remove leading zeros from an input field.\r\n * \r\n * @since 1.2\r\n */\r\nexport function remove_leading_zeros(): void {\r\n\r\n    const $input: any = $(this);\r\n    let value: string = $input.val();\r\n\r\n    if ( value == \"0\" + acfw_edit_coupon.decimal_separator ) $input.val( \"0\" );\r\n    if ( value == \"0\" || value.substring( 0, 2 ) == \"0\" + acfw_edit_coupon.decimal_separator ) return;\r\n\r\n    value = value.replace( /^0+/ , \"\" );\r\n    value = value.substring( 0, 1 ) == acfw_edit_coupon.decimal_separator ? \"0\" + value : value;\r\n    \r\n    $input.val( value );\r\n}\r\n\r\n/**\r\n * Condition value type change (used in user and cart item meta condition fields).\r\n * \r\n * @since 1.14\r\n */\r\nexport function condition_value_type_change() {\r\n\r\n    const $type: JQuery    = $(this),\r\n        $field: JQuery     = $type.closest( \".condition-field\" ),\r\n        $condition: JQuery = $field.find( \"select.condition-select\" ),\r\n        $value: JQuery     = $field.find( \"input.condition-value\" ); \r\n\r\n    switch ( $type.val() ) {\r\n\r\n    case \"string\" :\r\n        $value.prop( \"type\", \"text\" );\r\n        $value.removeClass( \"wc_input_price\" );\r\n        if ( $condition.val() == \">\" || $condition.val() == \"<\" ) $condition.val( \"=\" );\r\n        $condition.find( \"option[value='>'],option[value='<']\" ).prop( \"disabled\", true );\r\n        break;\r\n\r\n    case \"number\" :\r\n        $value.prop( \"type\", \"number\" );\r\n        $value.removeClass( \"wc_input_price\" );\r\n        $condition.find( \"option[value='>'],option[value='<']\" ).prop( \"disabled\", false );\r\n        break;\r\n\r\n    case \"price\" :\r\n        $value.prop( \"type\", \"text\" );\r\n        $value.addClass( \"wc_input_price\" );\r\n        $condition.find( \"option[value='>'],option[value='<']\" ).prop( \"disabled\", false );\r\n        break;\r\n    }\r\n\r\n    $condition.trigger( \"change\" );\r\n}","declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst { cart_condition_fields } = acfw_edit_coupon;\r\n\r\nexport function navigate_tabs() : void {\r\n    \r\n    const $tab: JQuery = $(this),\r\n        $module_block  = $tab.closest( \".woocommerce\" ).find( \"#acfw_cart_conditions\" ),\r\n        tab: string    = $tab.data( \"tab\" );\r\n    \r\n    let panel: string = '';\r\n\r\n    switch (tab) {\r\n\r\n        case \"settings\" :\r\n            panel = \".additional-settings\";\r\n            break;\r\n    \r\n        case \"rules\" :\r\n        default :\r\n            panel = \".condition-data-wrap\";\r\n            break;\r\n    }\r\n\r\n    $module_block.find( \".panel\" ).hide();\r\n    $module_block.find( panel ).show();\r\n    set_active_tab( $tab );\r\n}\r\n\r\nfunction set_active_tab( $tab : JQuery ) : void {\r\n\r\n    $( \".acfw-cart-condition-tabs li\" ).removeClass( \"active\" );\r\n    $tab.closest( \"li\" ).addClass( \"active\" );\r\n}","import { add_condition_group , remove_condition_group } from \"./groups\";\r\nimport { add_condition_field , remove_condition_field , get_condition_field , is_condition_field } from \"./fields\";\r\nimport { save_cart_conditions , save_on_coupon_publish } from \"./save\";\r\nimport { \r\n    toggle_add_condition_form, \r\n    toggle_editing_mode, \r\n    popuplate_taxonomy_term_options, \r\n    popuplate_shipping_region_options\r\n} from \"./toggles\";\r\nimport { \r\n    trigger_add_table_row_form, \r\n    trigger_edit_table_row_form, \r\n    add_edit_table_row, \r\n    cancel_add_edit_table_row, \r\n    product_table_remove_product\r\n} from \"./table\";\r\nimport { \r\n    restrict_number_min_value, \r\n    update_input_minimum_value, \r\n    update_has_ordered_before_condition_label, \r\n    validate_price_field_value,\r\n    remove_leading_zeros,\r\n    condition_value_type_change\r\n} from \"./restrictions\";\r\n\r\nimport logic_template from \"./templates/logic\";\r\nimport condition_logic_template from \"./templates/condition_logic\";\r\nimport condition_group_template from \"./templates/condition_group\";\r\nimport { navigate_tabs } from \"./tabs\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block: HTMLElement = document.querySelector( \"#acfw_cart_conditions\" );\r\n\r\n/**\r\n * Add free products module events script.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport default function cart_conditions_module_events() {\r\n\r\n    $( module_block ).on( \"click\" , \"#add-cart-condition-group\" , add_condition_group );\r\n    $( module_block ).on( \"click\" , \"a.remove-condition-group\" , remove_condition_group );\r\n    $( module_block ).on( \"click\" , \".add-condition-field\" , add_condition_field );\r\n    $( module_block ).on( \"click\" , \"a.remove-condition-field\" , remove_condition_field );\r\n    $( module_block ).on( \"click\" , \".add-condition-trigger\" , toggle_add_condition_form );\r\n    $( module_block ).on( \"click\" , \".cancel-add-condition-field\" , toggle_add_condition_form );\r\n    $( module_block ).on( \"click\" , \".acfw-styled-table tfoot .add-table-row\" , trigger_add_table_row_form );\r\n    $( module_block ).on( \"click\" , \".acfw-styled-table td.actions a.edit\" , trigger_edit_table_row_form );\r\n    $( module_block ).on( \"click\" , \"tr.add-edit-form .actions .condition-product-add\" , add_edit_table_row );\r\n    $( module_block ).on( \"click\" , \"tr.add-edit-form .actions .cancel\" , cancel_add_edit_table_row );\r\n    $( module_block ).on( \"click\" , \".acfw-styled-table td.actions a.remove\" , product_table_remove_product );\r\n    $( module_block ).on( \"click\" , \"#save-cart-conditions\" , save_cart_conditions );\r\n    $( module_block ).on( \"change\" , \"input[type='number']\" , restrict_number_min_value );\r\n    $( module_block ).on( \"change\" , \"select.condition-select\" , update_input_minimum_value );\r\n    $( module_block ).on( \"change\" , \"select.has-ordered-before-type\" , update_has_ordered_before_condition_label );\r\n    $( module_block ).on( \"change\" , \".wc_input_price\" , validate_price_field_value );\r\n    $( module_block ).on( \"change\" , \"select.custom-taxonomy\", popuplate_taxonomy_term_options );\r\n    $( module_block ).on( \"change\" , \".shipping-zone-region-field select.condition-select\" , popuplate_shipping_region_options );\r\n    $( module_block ).on( \"blur\" , \".wc_input_price\" , remove_leading_zeros );\r\n    $( module_block ).on( \"change\" , \"select.value-type\" , condition_value_type_change );\r\n    $( \"form#post\" ).on( \"submit\" , save_on_coupon_publish );\r\n\r\n    $( module_block ).find( \"select\" ).trigger( \"change\" );\r\n    $( module_block ).css( \"min-height\" , $( \"#coupon_options\" ).height() );\r\n\r\n    $( module_block ).on( \"change\" , \"input,select,textarea\" , () => {\r\n        toggle_editing_mode( true );\r\n    });\r\n\r\n    $( module_block ).find( \".condition-groups\" ).each( function() {\r\n        if ( $(this).find( \".condition-group-fields\" ).length )\r\n            $(this).show();\r\n    } );\r\n\r\n    $( \".acfw-cart-condition-tabs\" ).on( \"click\" , \"li a\" , navigate_tabs );\r\n\r\n    setTimeout( init_cart_conditions , 500 );\r\n}\r\n\r\n/**\r\n * Init cart conditions. Save the current cart conditions data.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction init_cart_conditions(): void {\r\n\r\n    const condition_groups = module_block.querySelector( \".condition-groups\" );\r\n    const data: any = $( module_block ).data( \"cart_conditions\" );\r\n\r\n    const asyncFunc = async () => {\r\n\r\n        let cart_conditions: any[] = [];\r\n        let markup: string = \"\";\r\n\r\n        if ( data.length ) {\r\n            for ( let row of data ) {\r\n                if ( row.type == \"group\" ) {\r\n                    const fields_markup = load_condition_group_fields( row.fields );\r\n                    markup += condition_group_template( fields_markup );\r\n                } else \r\n                    markup += condition_logic_template( row.value );\r\n            }\r\n        } else\r\n            markup = condition_group_template();\r\n\r\n        $( condition_groups ).html( markup );\r\n        $( condition_groups ).find('input,select').trigger(\"change\");\r\n\r\n        $( condition_groups ).find( \".condition-group.new .add-condition-trigger\" ).trigger( \"click\" );\r\n        $( condition_groups ).find( \".condition-group\" ).removeClass( \"new\" );\r\n    }\r\n\r\n    asyncFunc().then( () => {\r\n        setTimeout( () => $( \"body\" ).trigger( \"wc-enhanced-select-init\" ), 1500 );\r\n        toggle_editing_mode( false );\r\n    });\r\n}\r\n\r\n/**\r\n * Load condition group fields.\r\n * \r\n * @since 1.0.0\r\n * \r\n * @param fields \r\n */\r\nfunction load_condition_group_fields( fields: any[] ): string {\r\n\r\n    let markup: string = \"\";\r\n    let temp: string   = \"\";\r\n    let addLogic: boolean = true;\r\n\r\n    for ( let field of fields ) {\r\n\r\n        const { type, data } = field;\r\n\r\n        if ( ! is_condition_field( type ) ) {\r\n            addLogic = false;\r\n            continue;\r\n        }\r\n\r\n        if ( type == \"logic\" && addLogic ) {\r\n            temp = logic_template( data );\r\n            continue;\r\n        }\r\n\r\n        const field_markup = get_condition_field( type , data );\r\n\r\n        if ( field_markup ) {\r\n            markup += temp + field_markup;\r\n        }\r\n\r\n        addLogic = true;\r\n        temp = \"\";\r\n    }\r\n\r\n    return markup;\r\n}","declare var acfw_edit_coupon: any;\r\n\r\nexport default function upsell_template() {\r\n\r\n    const { upsell } = acfw_edit_coupon;\r\n\r\n    if ( ! upsell ) return '';\r\n\r\n    return `\r\n    <div class=\"upsell\">\r\n        ${ upsell.bogo_deals_type }\r\n    </div>`;\r\n}","import { esc_attr } from \"../../helper\";\r\n\r\n/**\r\n * Category table row first column template.\r\n * \r\n * @param data \r\n */\r\nexport default function category_first_column_template( data: any ): string {\r\n\r\n    const { category_id , category_label } = data;\r\n\r\n    return `\r\n    <td class=\"category category-${ category_id } object\" data-category=\"${ esc_attr( JSON.stringify(data) ) }\">\r\n        ${ category_label }\r\n    </td>\r\n    `;\r\n}","declare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Placeholder table row.\r\n * \r\n * @since 1.15\r\n * \r\n * @param colspan \r\n */\r\nexport default function placeholder_table_row_template( colspan: number = 3, type: string = \"product\" ): string {\r\n\r\n    const { no_products_added , no_categories_added } = acfw_edit_coupon;\r\n    return `\r\n    <tr class=\"no-result\">\r\n        <td colspan=\"${ colspan }\">${ type == \"category\" ? no_categories_added : no_products_added }</td>\r\n    </tr>\r\n    `;\r\n}","import { esc_attr } from \"../../helper\";\r\nimport category_first_column_template from \"./category_first_column\";\r\nimport placeholder_row_template from \"./placeholder_row\";\r\nimport upsell_template from \"./upsell\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Product cagtegories condition type.\r\n * \r\n * @since 1.1.0\r\n */\r\nexport default function product_categories_template( data: any , data_type: string , is_deals = false ) {\r\n\r\n    const { add_prod_cat_label , bogo_form_fields } = acfw_edit_coupon;\r\n    const { quantity : quantityLabel , product_cat : categoryLabel } = bogo_form_fields;\r\n\r\n    const colspan: number = is_deals ? 4 : 3;\r\n    const priceTh: string = is_deals ? `<th class=\"price\">Price/Discount</th>` : \"\";\r\n\r\n    let tbody: string = \"\";\r\n    let exclude: number[] = [];\r\n\r\n    if ( data.length >= 1 && data_type == \"product-categories\" ) {\r\n\r\n        for ( let product_cat of data ) {\r\n\r\n            let { category_id , quantity , discount_type , discount_value } = product_cat;\r\n            let priceCol: string = is_deals ? get_price_column( discount_type , discount_value ) : \"\";\r\n\r\n            exclude.push( category_id );\r\n            tbody += `\r\n                <tr>\r\n                    ${ category_first_column_template( product_cat ) }\r\n                    <td class=\"quantity\">${ quantity }</td>\r\n                    ${ priceCol }\r\n                    <td class=\"actions\">\r\n                        <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\r\n                        <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\r\n                    </td>\r\n                </tr>\r\n            `;\r\n        }\r\n\r\n    } else {\r\n        tbody = placeholder_row_template( colspan , \"category\" );\r\n    }\r\n\r\n    return `\r\n        <table class=\"acfw-styled-table\" \r\n            data-type=\"category\" \r\n            data-exclude=\"${ esc_attr( JSON.stringify( exclude ) ) }\" \r\n            data-isdeals=\"${ is_deals }\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"product-cat\">${ categoryLabel }</th>\r\n                    <th class=\"quantity\">${ quantityLabel }</th>\r\n                    ${ priceTh }\r\n                    <th class=\"actions\"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>${ tbody }</tbody>\r\n            <tfoot>\r\n                <tr>\r\n                    <td colspan=\"${ colspan }\">\r\n                        <a class=\"add-table-row\" href=\"javascript:void(0);\">\r\n                            <i class=\"dashicons dashicons-plus\"></i>\r\n                            ${ add_prod_cat_label }\r\n                        </a>\r\n                    </td>\r\n                </tr>\r\n            </tfoot>\r\n        </table>\r\n        ${ upsell_template() }\r\n    `;\r\n}\r\n\r\n/**\r\n * Get price column.\r\n * \r\n * @param discount_type \r\n * @param discount_value \r\n */\r\nfunction get_price_column( discount_type: string = \"override\" , discount_value: string = \"0\" ) {\r\n\r\n    return `<td class=\"price\">\r\n        (${ discount_type }) ${ discount_value }\r\n    </td>`;\r\n}","import { esc_attr } from \"../../helper\";\r\n\r\n/**\r\n * Product table row first column template.\r\n * \r\n * @param data \r\n */\r\nexport default function product_first_column_template( data: any ): string {\r\n\r\n    const { product_id , product_label } = data;\r\n\r\n    return `\r\n    <td class=\"product product-${ product_id } object\" data-product=\"${ esc_attr( JSON.stringify(data) ) }\">\r\n        ${ product_label }\r\n    </td>\r\n    `\r\n}","import { esc_attr } from \"../../helper\";\r\nimport product_first_column_template from \"./product_first_column\";\r\nimport placeholder_row_template from \"./placeholder_row\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Specific products condition type.\r\n * \r\n * @since 1.1.0\r\n */\r\nexport default function specific_products_template( data: any , data_type: string , is_deals: boolean = false ) {\r\n\r\n    const { add_product_label , bogo_form_fields } = acfw_edit_coupon;\r\n    const { quantity : quantityLabel , product : productLabel } = bogo_form_fields;\r\n\r\n    const colspan: number = is_deals ? 4 : 3;\r\n    const priceTh: string = is_deals ? `<th class=\"price\">Price/Discount</th>` : '';\r\n\r\n    let tbody: string = \"\";\r\n    let exclude: number[] = [];\r\n\r\n    if ( data.length >= 1 && data_type == \"specific-products\" ) {\r\n\r\n        for ( let product of data ) {\r\n\r\n            let { quantity , discount_type , discount_value } = product;\r\n            let priceCol: string = is_deals ? get_price_column( discount_type , discount_value ) : \"\";\r\n\r\n            exclude.push( product.product_id );\r\n            tbody += `\r\n                <tr>\r\n                    ${ product_first_column_template( product ) }\r\n                    <td class=\"quantity\">${ quantity }</td>\r\n                    ${ priceCol }\r\n                    <td class=\"actions\">\r\n                        <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\r\n                        <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\r\n                    </td>\r\n                </tr>\r\n            `;\r\n        }\r\n\r\n    } else {\r\n        tbody = placeholder_row_template( colspan );\r\n    }\r\n\r\n    const markup = `\r\n        <table class=\"product-quantity-condition-table acfw-styled-table\" \r\n            data-type=\"product\" data-exclude=\"${ esc_attr( JSON.stringify( exclude ) ) }\" \r\n            data-isdeals=\"${ is_deals }\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"product\">${ productLabel }</th>\r\n                    <th class=\"quantity\">${ quantityLabel }</th>\r\n                    ${ priceTh }\r\n                    <th class=\"actions\"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>${ tbody }</tbody>\r\n            <tfoot>\r\n                <tr>\r\n                    <td colspan=\"${ colspan }\">\r\n                        <a class=\"add-table-row\" href=\"javascript:void(0);\">\r\n                            <i class=\"dashicons dashicons-plus\"></i>\r\n                            ${ add_product_label }\r\n                        </a>\r\n                    </td>\r\n                </tr>\r\n            </tfoot>\r\n        </table>\r\n    `;\r\n    \r\n    return markup;\r\n}\r\n\r\n/**\r\n * Get price column.\r\n * \r\n * @param discount_type \r\n * @param discount_value \r\n */\r\nfunction get_price_column( discount_type: string = \"override\" , discount_value: string = \"0\" ) {\r\n\r\n    return `<td class=\"price\">\r\n        (${ discount_type }) ${ discount_value }\r\n    </td>`;\r\n}","import combination_products_template from \"./templates/combination_products\";\r\nimport product_categories_template from \"./templates/product_categories\";\r\nimport specific_products_template from \"./templates/specific_products\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block: HTMLElement = document.querySelector(\"#acfw_bogo_deals\");\r\n\r\n/**\r\n * Toggle editing mode.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param {toggle} bool True to toggle editing mode, false otherwise.\r\n */\r\nexport function toggle_editing_mode(toggle: boolean) {\r\n  $(module_block).data(\"editing\", toggle);\r\n  $(module_block).find(\"#save-bogo-deals\").prop(\"disabled\", !toggle);\r\n}\r\n\r\n/**\r\n * Toggle condition type.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function toggle_block_data_type() {\r\n  const $select: JQuery = $(this),\r\n    block_type: string = $select.data(\"block\"),\r\n    condition_block: HTMLElement = module_block.querySelector(\r\n      \".bogo-conditions-block\"\r\n    ),\r\n    deals_block: HTMLElement = module_block.querySelector(\r\n      \".bogo-product-deals-block\"\r\n    ),\r\n    bogo_deals: any = $(module_block).data(\"bogo_deals\"),\r\n    conditions: any = bogo_deals.conditions ? bogo_deals.conditions : [],\r\n    deals: any = bogo_deals.deals ? bogo_deals.deals : [],\r\n    block_data: any = block_type == \"conditions\" ? conditions : deals,\r\n    block_data_type: string =\r\n      block_type == \"conditions\"\r\n        ? bogo_deals.conditions_type\r\n        : bogo_deals.deals_type;\r\n\r\n  let isPremium = false,\r\n    markup,\r\n    tempBlock;\r\n\r\n  switch ($select.val()) {\r\n    case \"combination-products\":\r\n      markup = combination_products_template(block_data, block_type == \"deals\");\r\n      isPremium = true;\r\n      break;\r\n\r\n    case \"product-categories\":\r\n      markup = product_categories_template(\r\n        block_data,\r\n        block_data_type,\r\n        block_type == \"deals\"\r\n      );\r\n      isPremium = true;\r\n      break;\r\n\r\n    case \"specific-products\":\r\n    default:\r\n      markup = specific_products_template(\r\n        block_data,\r\n        block_data_type,\r\n        block_type == \"deals\"\r\n      );\r\n      isPremium = false;\r\n      break;\r\n  }\r\n\r\n  if (block_type == \"conditions\") {\r\n    $(condition_block).html(markup);\r\n    tempBlock = condition_block;\r\n  } else {\r\n    const $multipleDesc = $(module_block).find(\".multiple-items-desc\");\r\n\r\n    if (\"specific-products\" !== $select.val()) $multipleDesc.show();\r\n    else $multipleDesc.hide();\r\n\r\n    $(deals_block).html(markup);\r\n    tempBlock = deals_block;\r\n  }\r\n\r\n  if (isPremium && undefined !== acfw_edit_coupon.upsell)\r\n    $(tempBlock).addClass(\"premium-only\");\r\n  else $(tempBlock).removeClass(\"premium-only\");\r\n\r\n  $(\"body\").trigger(\"wc-enhanced-select-init\");\r\n}\r\n","import { esc_attr } from \"../../helper\";\r\nimport upsell_template from \"./upsell\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Specific products condition type.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport default function combination_products_template(\r\n  data: any,\r\n  is_deals = false\r\n) {\r\n  const { products, quantity, discount_type, discount_value } = data;\r\n  const {\r\n    quantity: quantityLabel,\r\n    type_to_search,\r\n  } = acfw_edit_coupon.bogo_form_fields;\r\n\r\n  const priceType: string = discount_type ? data.discount_type : \"override\";\r\n  const priceCol: string = is_deals\r\n    ? get_price_column(priceType, discount_value)\r\n    : \"\";\r\n  const priceTh: string = is_deals\r\n    ? `<th class=\"price\">Price/Discount</th>`\r\n    : \"\";\r\n  const options: string = get_options(products);\r\n\r\n  const markup = `\r\n        <table class=\"acfw-styled-table combined-products-form\" \r\n            data-combined=\"${esc_attr(JSON.stringify(data))}\"\r\n            data-isdeals=\"${is_deals}\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"products-list\">Products</th>\r\n                    <th class=\"quantity\">${quantityLabel}</th>\r\n                    ${priceTh}\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td class=\"products-list object\">\r\n                        <select class=\"combined-products-list wc-product-search\"\r\n                        data-placeholder=\"${type_to_search}\"\r\n                        data-action=\"acfw_search_products\"\r\n                        data-exclude=\"\" multiple>${options}</select>\r\n                    </td>\r\n                    <td class=\"quantity\">\r\n                        <input type=\"number\" class=\"condition-quantity\" value=\"${quantity}\" min=\"1\">\r\n                    </td>\r\n                    ${priceCol}\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        ${upsell_template()}\r\n    `;\r\n\r\n  return markup;\r\n}\r\n\r\n/**\r\n * Get product(s) price column.\r\n *\r\n * @since 1.15\r\n *\r\n * @param priceType\r\n * @param discount_value\r\n */\r\nfunction get_price_column(\r\n  priceType: string,\r\n  discount_value: string = \"0\"\r\n): string {\r\n  const { currency_symbol, discount_field_options } = acfw_edit_coupon;\r\n  const { override, percent, fixed } = discount_field_options;\r\n\r\n  return `\r\n    <td class=\"price\">\r\n        <div>\r\n        <select class=\"discount_type\">\r\n            <option value=\"override\" ${\r\n              priceType == \"override\" ? \"selected\" : \"\"\r\n            }>${currency_symbol} : ${override}</option>\r\n            <option value=\"percent\" ${\r\n              priceType == \"percent\" ? \"selected\" : \"\"\r\n            }>% : ${percent}</option>\r\n            <option value=\"fixed\" ${\r\n              priceType == \"fixed\" ? \"selected\" : \"\"\r\n            }>-${currency_symbol} : ${fixed}</option>\r\n        </select>\r\n        <input type=\"text\" class=\"discount_value short wc_input_price\" value=\"${discount_value}\">\r\n        </div>\r\n    </td>\r\n    `;\r\n}\r\n\r\n/**\r\n * Get product(s) row options.\r\n *\r\n * @since 1.15\r\n *\r\n * @param products\r\n */\r\nfunction get_options(products: any): string {\r\n  if (typeof products != \"object\" || !products.length) return;\r\n\r\n  let options = \"\";\r\n  for (let p of products)\r\n    options += `<option value=\"${p.product_id}\" selected>${p.label}</option>`;\r\n\r\n  return options;\r\n}\r\n","import { toggle_overlay } from \"../helper\";\r\nimport { toggle_editing_mode } from \"./toggles\";\r\nimport placeholder_table_row_template from \"./templates/placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var woocommerce_admin_meta_boxes: any;\r\ndeclare var ajaxurl: string;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block: HTMLElement = document.querySelector(\"#acfw_bogo_deals\");\r\nconst { post_id } = woocommerce_admin_meta_boxes;\r\n\r\n/**\r\n * Save BOGO Deals.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function save_bogo_deals() {\r\n  // cancel product table edit form rows.\r\n  $(\"#acfw_bogo_deals\")\r\n    .find(\".acfw-styled-table tr.add-edit-form button.cancel\")\r\n    .trigger(\"click\");\r\n\r\n  const { post_status, upsell } = acfw_edit_coupon;\r\n\r\n  const condition_rows: NodeList = module_block.querySelectorAll(\r\n      \".bogo-conditions-block table.acfw-styled-table tbody td.object\"\r\n    ),\r\n    deal_rows: NodeList = module_block.querySelectorAll(\r\n      \".bogo-product-deals-block table.acfw-styled-table tbody td.object\"\r\n    ),\r\n    overlay: HTMLElement = module_block.querySelector(\".acfw-overlay\"),\r\n    type_field: HTMLInputElement = module_block.querySelector(\r\n      \"input[name='bogo_type']:checked\"\r\n    ),\r\n    conditions_type: string = $(module_block)\r\n      .find(\"#bogo-condition-type\")\r\n      .val(),\r\n    deals_type: string = $(module_block).find(\"#bogo-deals-type\").val(),\r\n    $notice_options: JQuery = $(module_block).find(\".notice-option\");\r\n\r\n  const conditions: any = get_data(condition_rows, conditions_type);\r\n  const deals: any = get_data(deal_rows, deals_type);\r\n  const type: string = type_field ? type_field.value : null;\r\n\r\n  if (conditions.length < 1 || deals.length < 1 || !type) {\r\n    vex.dialog.alert(acfw_edit_coupon.bogo_deals_save_error_msg);\r\n\r\n    // Add save error flag class in #acfw_bogo_deals\r\n    $(module_block).addClass(\"save-error\");\r\n    return;\r\n  }\r\n\r\n  if (\r\n    upsell !== undefined &&\r\n    (conditions_type !== \"specific-products\" ||\r\n      deals_type !== \"specific-products\")\r\n  ) {\r\n    vex.dialog.alert(acfw_edit_coupon.bogo_deals_save_error_msg);\r\n\r\n    // Add save error flag class in #acfw_bogo_deals\r\n    $(module_block).addClass(\"save-error\");\r\n    return;\r\n  }\r\n\r\n  const notice_settings = {\r\n    message: $notice_options\r\n      .find(\"textarea[name='acfw_bogo_notice_message_text']\")\r\n      .val(),\r\n    button_text: $notice_options\r\n      .find(\"input[name='acfw_bogo_notice_button_text']\")\r\n      .val(),\r\n    button_url: $notice_options\r\n      .find(\"input[name='acfw_bogo_notice_button_url']\")\r\n      .val(),\r\n    notice_type: $notice_options\r\n      .find(\"select[name='acfw_bogo_notice_type']\")\r\n      .val(),\r\n  };\r\n\r\n  toggle_overlay(overlay, \"show\");\r\n\r\n  $(module_block).trigger(\"save_bogo_deals\");\r\n\r\n  $.post(\r\n    ajaxurl,\r\n    {\r\n      action: \"acfw_save_bogo_deals\",\r\n      coupon_id: post_id,\r\n      conditions: conditions,\r\n      deals: deals,\r\n      conditions_type: conditions_type,\r\n      deals_type: deals_type,\r\n      type: type,\r\n      notice_settings: notice_settings,\r\n    },\r\n    (response: any) => {\r\n      if (response.status == \"success\") {\r\n        // if coupon is not published yet, then save it as draft.\r\n        if (post_status !== \"publish\") {\r\n          if (!$(\"input[name='post_title']\").val())\r\n            $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\r\n\r\n          $(\"select[name='post_status']\")\r\n            .append(new Option(\"Published\", \"publish\"))\r\n            .val(\"publish\");\r\n\r\n          $(\"#publishing-action\").append(`\r\n                    <input type=\"hidden\" name=\"publish\" value=\"Publish\">\r\n                `);\r\n          $(\"input#publish\").click();\r\n        }\r\n      } else {\r\n        if (response.error_msg) vex.dialog.alert(response.error_msg);\r\n        console.log(response);\r\n      }\r\n\r\n      $(module_block).find(\"#clear-bogo-deals\").prop(\"disabled\", false);\r\n      toggle_editing_mode(false);\r\n      toggle_overlay(overlay, \"hide\");\r\n    },\r\n    \"json\"\r\n  );\r\n}\r\n\r\n/**\r\n * Get BOGO Deals data.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param rows\r\n * @param type\r\n */\r\nfunction get_data(rows: NodeList, type: string): any {\r\n  let data = [],\r\n    temp;\r\n\r\n  if (type == \"combination-products\")\r\n    data = $(rows).closest(\"table.combined-products-form\").data(\"combined\");\r\n  else {\r\n    rows.forEach((row: HTMLElement) => {\r\n      temp =\r\n        type == \"product-categories\"\r\n          ? jQuery(row).data(\"category\")\r\n          : jQuery(row).data(\"product\");\r\n      if (temp) data.push(temp);\r\n    });\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n/**\r\n * Clear BOGO Deals.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function clear_bogo_deals() {\r\n  const $button: JQuery = $(this);\r\n\r\n  if (!confirm($button.data(\"prompt\"))) return;\r\n\r\n  const condition_rows: HTMLElement = module_block.querySelector(\r\n      \".bogo-conditions-block table.acfw-styled-table tbody\"\r\n    ),\r\n    deal_rows: HTMLElement = module_block.querySelector(\r\n      \".bogo-product-deals-block table.acfw-styled-table tbody\"\r\n    ),\r\n    overlay: HTMLElement = module_block.querySelector(\".acfw-overlay\"),\r\n    type_field: HTMLInputElement = module_block.querySelector(\r\n      \"input[name='bogo_type']:checked\"\r\n    );\r\n\r\n  toggle_overlay(overlay, \"show\");\r\n\r\n  $.post(\r\n    ajaxurl,\r\n    {\r\n      action: \"acfw_clear_bogo_deals\",\r\n      coupon_id: post_id,\r\n      _wpnonce: $button.data(\"nonce\"),\r\n    },\r\n    (response: any) => {\r\n      if (response.status == \"success\") {\r\n        $(condition_rows).html(placeholder_table_row_template(3));\r\n        $(deal_rows).html(placeholder_table_row_template(4));\r\n        $(type_field).prop(\"checked\", false);\r\n\r\n        $button.prop(\"disabled\", true);\r\n        toggle_editing_mode(false);\r\n\r\n        // if coupon is not published yet, then save it as draft.\r\n        if ($(\"#post-status-display\").text() != \"Published\") {\r\n          if (!$(\"input[name='post_title']\").val())\r\n            $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\r\n\r\n          $(\"input#publish\").click();\r\n        }\r\n      } else {\r\n        if (response.error_msg) vex.dialog.alert(response.error_msg);\r\n        console.log(response);\r\n      }\r\n\r\n      toggle_overlay(overlay, \"hide\");\r\n    },\r\n    \"json\"\r\n  );\r\n}\r\n\r\n/**\r\n * Update combined products list.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function update_combined_products_list() {\r\n  const $table: JQuery = $(this).closest(\"table.combined-products-form\"),\r\n    current_data: any = $table.data(\"combined\"),\r\n    $options: JQuery = $table.find(\".wc-product-search option:selected\"),\r\n    quantity: number = parseInt(\r\n      $table.find(\"input.condition-quantity\").val() + \"\"\r\n    ),\r\n    conditions: any = { products: [], quantity: quantity },\r\n    is_deals: string = $table.data(\"isdeals\");\r\n\r\n  if (is_deals) {\r\n    const $discount_type: JQuery = $table.find(\"select.discount_type\"),\r\n      $discount_value: JQuery = $table.find(\"input.discount_value\"),\r\n      discount_val: number = parseFloat($discount_value.val().toString());\r\n\r\n    if (discount_val < 0 || isNaN(discount_val)) {\r\n      $discount_value.val(current_data ? current_data.discount_value : \"\");\r\n      vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\r\n      return;\r\n    } else {\r\n      conditions.discount_type = $discount_type.val();\r\n      conditions.discount_value = $discount_value.val();\r\n    }\r\n  }\r\n\r\n  let $temp, x;\r\n\r\n  for (x = 0; x < $options.length; x++) {\r\n    $temp = $($options[x]);\r\n    conditions.products.push({ product_id: $temp.val(), label: $temp.text() });\r\n  }\r\n\r\n  $table.data(\"combined\", conditions);\r\n  toggle_editing_mode(true);\r\n}\r\n\r\n/**\r\n * Save on coupon publish.\r\n *\r\n * @since 1.1.0\r\n *\r\n * @param {e} object Event Object.\r\n */\r\nexport function save_on_coupon_publish(e: Event) {\r\n  // Only run this condition if we are in BOGO Deals tab\r\n  if (!$(\".coupon_data_tabs\").find(\".acfw_bogo_deals_tab\").hasClass(\"active\"))\r\n    return;\r\n\r\n  if (!$(module_block).data(\"editing\")) return;\r\n\r\n  e.preventDefault();\r\n  $(module_block).find(\"#save-bogo-deals\").trigger(\"click\");\r\n\r\n  // delay for 1 second to give time for\r\n  setTimeout(() => {\r\n    // If BOGO Deals displays an error message then don't save the coupon\r\n    if ($(module_block).hasClass(\"save-error\"))\r\n      $(module_block).removeClass(\"save-error\");\r\n    else $(\"form#post\").submit();\r\n  }, 1000);\r\n}\r\n","import { esc_attr } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Add edit row template.\r\n *\r\n * @since 1.15\r\n *\r\n * @param type\r\n * @param exclude\r\n * @param is_deals\r\n */\r\nexport default function add_edit_row_template(\r\n  type: string,\r\n  exclude: number[],\r\n  is_deals: string,\r\n  data: any = false\r\n): string {\r\n  const { type_to_search } = acfw_edit_coupon.bogo_form_fields;\r\n  const { add, edit, cancel } = acfw_edit_coupon.product_table_buttons;\r\n  const { quantity } = data;\r\n\r\n  const option: string = typeof data == \"object\" ? get_option(type, data) : \"\";\r\n  const priceCol: string = is_deals ? get_price_column(data) : \"\";\r\n  const btnText: string = typeof data == \"object\" ? edit : add;\r\n\r\n  return `\r\n    <tr class=\"add-edit-form adding\">\r\n        <td class=\"product\" data-object=\"${\r\n          typeof data == \"object\" ? esc_attr(JSON.stringify(data)) : 0\r\n        }\">\r\n            <div class=\"object-search-wrap\">\r\n                <select class=\"${\r\n                  type == \"category\"\r\n                    ? \"product-category-in-cart\"\r\n                    : \"product-in-cart\"\r\n                } wc-product-search\"\r\n                    data-placeholder=\"${type_to_search}\"\r\n                    data-action=\"${\r\n                      type == \"category\"\r\n                        ? \"acfw_search_product_category\"\r\n                        : \"acfw_search_products\"\r\n                    }\"\r\n                    data-exclude=\"${esc_attr(\r\n                      JSON.stringify(exclude)\r\n                    )}\">${option}</select>\r\n            </div>\r\n        </td>\r\n        <td class=\"quantity\">\r\n            <input type=\"number\" class=\"condition-quantity\" value=\"${\r\n              typeof data == \"object\" ? quantity : 1\r\n            }\" min=\"1\">\r\n        </td>\r\n        ${priceCol}\r\n        <td class=\"actions\">\r\n            <button type=\"button\" class=\"condition-product-add button-primary\">${btnText}</button>\r\n            <button type=\"button\" class=\"cancel button\">${cancel}</button>\r\n        </td>\r\n    </tr>\r\n    `;\r\n}\r\n\r\n/**\r\n * Get option markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param type\r\n * @param data\r\n */\r\nfunction get_option(type: string, data: any): string {\r\n  const { category_id, product_id, category_label, product_label } = data;\r\n  const value: string = type == \"category\" ? category_id : product_id;\r\n  const label: string = type == \"category\" ? category_label : product_label;\r\n\r\n  return `<option value=\"${value}\">${label}</option>`;\r\n}\r\n\r\nfunction get_price_column(data: any): string {\r\n  const { currency_symbol, discount_field_options } = acfw_edit_coupon;\r\n  const { override, percent, fixed } = discount_field_options;\r\n  const { discount_type, discount_value } = data;\r\n  const value: string =\r\n    typeof data == \"object\" && discount_value ? discount_value : \"0\";\r\n\r\n  return `\r\n    <td class=\"price\">\r\n        <div>\r\n        <select class=\"discount_type\">\r\n            <option value=\"override\" ${\r\n              discount_type == \"override\" ? \"selected\" : \"\"\r\n            }>${currency_symbol} : ${override}</option>\r\n            <option value=\"percent\" ${\r\n              discount_type == \"percent\" ? \"selected\" : \"\"\r\n            }>% : ${percent}</option>\r\n            <option value=\"fixed\" ${\r\n              discount_type == \"fixed\" ? \"selected\" : \"\"\r\n            }>-${currency_symbol} : ${fixed}</option>\r\n        </select>\r\n        <input type=\"text\" class=\"discount_value short wc_input_price\" value=\"${value}\">\r\n        </div>\r\n    </td>\r\n    `;\r\n}\r\n","\r\nimport category_first_column_template from \"./category_first_column\";\r\nimport product_first_column_template from \"./product_first_column\";\r\n\r\n/**\r\n * Table single row markup.\r\n * \r\n * @since 1.15\r\n * \r\n * @param data \r\n * @param type \r\n * @param is_deals \r\n */\r\nexport default function table_row_template( data: any , type: string , is_deals: string ): string {\r\n\r\n    const { quantity , discount_type ,discount_value } = data;\r\n    const priceCol: string = is_deals ? `<td class=\"price\">(${ discount_type }) ${ discount_value }</td>` : \"\";\r\n\r\n    return `\r\n    <tr>\r\n        ${ get_first_column_markup( data , type ) }\r\n        <td class=\"quantity\">${ quantity }</td>\r\n        ${ priceCol }\r\n        <td class=\"actions\">\r\n            <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\r\n            <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\r\n        </td>\r\n    </tr>`;\r\n}\r\n\r\n/**\r\n * Get first column markup.\r\n * \r\n * @since 1.15\r\n * \r\n * @param data \r\n * @param type \r\n */\r\nfunction get_first_column_markup( data: any, type: string ): string {\r\n\r\n    switch ( type ) {\r\n        case \"category\" :\r\n            return category_first_column_template( data );\r\n        case \"product\" :\r\n            return product_first_column_template( data );\r\n    }\r\n}","import { toggle_editing_mode } from \"./toggles\";\r\nimport { price_to_float } from \"../helper\";\r\n\r\nimport add_edit_row_template from \"./templates/add_edit_row\";\r\nimport table_row_template from \"./templates/table_row\";\r\nimport placeholder_table_row_template from \"./templates/placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nconst { bogo_form_fields } = acfw_edit_coupon;\r\n\r\n/**\r\n * Trigger the add table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function trigger_add_table_row_form() {\r\n  const $button: JQuery = $(this),\r\n    $table: JQuery = $button.closest(\".acfw-styled-table\"),\r\n    $tbody: JQuery = $table.find(\"tbody\"),\r\n    is_deals: string = $table.data(\"isdeals\"),\r\n    type: string = $table.data(\"type\"),\r\n    exclude: number[] = $table.data(\"exclude\");\r\n\r\n  $tbody.find(\"tr.no-result\").remove();\r\n\r\n  $tbody.append(add_edit_row_template(type, exclude, is_deals));\r\n  $(\"body\").trigger(\"wc-enhanced-select-init\");\r\n\r\n  $tbody.find(\"tr.add-edit-form select.enhanced\").trigger(\"focus\");\r\n}\r\n\r\n/**\r\n * Trigger the edit table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function trigger_edit_table_row_form() {\r\n  const $button: JQuery = jQuery(this),\r\n    $row: JQuery = $button.closest(\"tr\"),\r\n    $table: JQuery = $button.closest(\".acfw-styled-table\"),\r\n    $tbody: JQuery = $table.find(\"tbody\"),\r\n    is_deals: string = $table.data(\"isdeals\"),\r\n    type: string = $table.data(\"type\"),\r\n    data: any = $row.find(\".object\").data(type);\r\n\r\n  const { category_id, product_id } = data;\r\n  const exclude: number[] = $table.data(\"exclude\");\r\n  const index: number = type == \"category\" ? category_id : product_id;\r\n\r\n  exclude.splice(exclude.indexOf(index), 1);\r\n  $tbody.find(\"tr.no-result\").remove();\r\n  $row.replaceWith(add_edit_row_template(type, exclude, is_deals, data));\r\n  $table.data(\"exclude\", exclude);\r\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\r\n  $(\"body\").trigger(\"wc-enhanced-select-init\");\r\n}\r\n\r\n/**\r\n * Trigger the cancel add/edit table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function cancel_add_edit_table_row() {\r\n  const $button: JQuery = $(this),\r\n    $row: JQuery = $button.closest(\"tr\"),\r\n    $table: JQuery = $button.closest(\"table\"),\r\n    $tbody: JQuery = $row.closest(\"tbody\"),\r\n    is_deals: string = $table.data(\"isdeals\"),\r\n    colspan: number = $row.find(\"td\").length,\r\n    type: string = $table.data(\"type\"),\r\n    data: any = $row.find(\"td.product\").data(\"object\");\r\n\r\n  const { category_id, product_id } = data;\r\n  const exclude: number[] = $table.data(\"exclude\");\r\n\r\n  if (typeof data == \"object\") {\r\n    exclude.push(type == \"category\" ? category_id : product_id);\r\n    $row.replaceWith(table_row_template(data, type, is_deals));\r\n    $table.data(\"exclude\", exclude);\r\n    $table.find(\".wc-product-search\").data(\"exclude\", exclude);\r\n  } else {\r\n    $row.remove();\r\n\r\n    if ($tbody.find(\"tr\").length <= 0)\r\n      $tbody.append(placeholder_table_row_template(colspan, type));\r\n  }\r\n}\r\n\r\n/**\r\n * Actual function that saves/edits the table row.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function add_edit_table_row() {\r\n  const $button: JQuery = $(this),\r\n    $row: JQuery = $button.closest(\"tr\"),\r\n    $table: JQuery = $button.closest(\"table.acfw-styled-table\"),\r\n    is_deals: string = $table.data(\"isdeals\"),\r\n    type: string = $table.data(\"type\"),\r\n    $search: JQuery = $row.find(\".wc-product-search\"),\r\n    $quantity: JQuery = $row.find(\".condition-quantity\");\r\n\r\n  const exclude = $table.data(\"exclude\");\r\n\r\n  if (!$search.val() || !$quantity.val() || $quantity.val() < 1) {\r\n    vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\r\n    return;\r\n  }\r\n\r\n  // dont allow negative value for discount/price field.\r\n  if (is_deals) {\r\n    const discount_val = $row.find(\"input.discount_value\").val().toString();\r\n\r\n    if (\r\n      price_to_float(discount_val) < 0 ||\r\n      isNaN(price_to_float(discount_val))\r\n    ) {\r\n      vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\r\n      return;\r\n    }\r\n  }\r\n\r\n  const data: any = get_table_row_data($row, type, is_deals);\r\n  const { category_id, product_id } = data;\r\n\r\n  exclude.push(type == \"category\" ? category_id : product_id);\r\n  $row.replaceWith(table_row_template(data, type, is_deals));\r\n  $table.data(\"exclude\", exclude);\r\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\r\n  toggle_editing_mode(true);\r\n}\r\n\r\n/**\r\n * Remove product in table.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function product_table_remove_product() {\r\n  const $button: JQuery = $(this),\r\n    $object_row: JQuery = $button.closest(\"tr\"),\r\n    $table: JQuery = $object_row.closest(\"table\"),\r\n    $tbody: JQuery = $object_row.closest(\"tbody\"),\r\n    colspan: number = $object_row.find(\"td\").length,\r\n    type: string = $table.data(\"type\");\r\n\r\n  const data = $object_row.find(\"td.object\").data(type);\r\n  const exclude = $table.data(\"exclude\");\r\n  let index: number;\r\n\r\n  switch (type) {\r\n    case \"category\":\r\n      index = exclude.indexOf(parseInt(data.category_id));\r\n      break;\r\n\r\n    case \"product\":\r\n    default:\r\n      index = exclude.indexOf(parseInt(data.product_id));\r\n      break;\r\n  }\r\n\r\n  if (index !== -1) exclude.splice(index, 1);\r\n  $table.data(\"exclude\", exclude);\r\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\r\n\r\n  $object_row.remove();\r\n\r\n  if ($tbody.find(\"tr\").length <= 0)\r\n    $tbody.append(placeholder_table_row_template(colspan, type));\r\n\r\n  toggle_editing_mode(true);\r\n}\r\n\r\n/**\r\n * Get table row data.\r\n *\r\n * @since 1.15\r\n *\r\n * @param $row\r\n * @param type\r\n * @param is_deals\r\n */\r\nfunction get_table_row_data($row: JQuery, type: string, is_deals: string): any {\r\n  let object: any = {};\r\n\r\n  if (type == \"category\") {\r\n    object = {\r\n      category_id: parseInt($row.find(\".wc-product-search\").val() + \"\"),\r\n      quantity: parseInt($row.find(\".condition-quantity\").val() + \"\"),\r\n      category_label: $row.find(\".wc-product-search option:selected\").text(),\r\n    };\r\n  } else {\r\n    object = {\r\n      product_id: parseInt($row.find(\".wc-product-search\").val() + \"\"),\r\n      quantity: parseInt($row.find(\".condition-quantity\").val() + \"\"),\r\n      product_label: $row.find(\".wc-product-search option:selected\").text(),\r\n    };\r\n  }\r\n\r\n  if (is_deals) {\r\n    object.discount_type = $row.find(\"select.discount_type\").val();\r\n    object.discount_value = $row.find(\"input.discount_value\").val().toString();\r\n  }\r\n\r\n  return object;\r\n}\r\n","import { remove_leading_zeros } from \"../helper\";\r\nimport { toggle_editing_mode, toggle_block_data_type } from \"./toggles\";\r\nimport {\r\n  save_bogo_deals,\r\n  clear_bogo_deals,\r\n  update_combined_products_list,\r\n  save_on_coupon_publish,\r\n} from \"./save\";\r\nimport {\r\n  trigger_add_table_row_form,\r\n  trigger_edit_table_row_form,\r\n  cancel_add_edit_table_row,\r\n  add_edit_table_row,\r\n  product_table_remove_product,\r\n} from \"./table\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block: HTMLElement = document.querySelector(\"#acfw_bogo_deals\");\r\n\r\n/**\r\n * Export functions to be accessed by ACFWP.\r\n */\r\nacfw_edit_coupon = {\r\n  ...acfw_edit_coupon,\r\n  bogo_toggle_editing_mode: toggle_editing_mode,\r\n};\r\n\r\n/**\r\n * Add free products module events script.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport default function bogo_deals_module_events(): void {\r\n  $(module_block).on(\r\n    \"click\",\r\n    \".acfw-styled-table tfoot .add-table-row\",\r\n    trigger_add_table_row_form\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \".acfw-styled-table td.actions a.edit\",\r\n    trigger_edit_table_row_form\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"tr.add-edit-form .actions .cancel\",\r\n    cancel_add_edit_table_row\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"tr.add-edit-form .actions .condition-product-add\",\r\n    add_edit_table_row\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \".acfw-styled-table td.actions a.remove\",\r\n    product_table_remove_product\r\n  );\r\n  $(module_block).on(\"click\", \"button#save-bogo-deals\", save_bogo_deals);\r\n  $(module_block).on(\"click\", \"button#clear-bogo-deals\", clear_bogo_deals);\r\n  $(module_block).on(\r\n    \"change\",\r\n    \"select#bogo-condition-type,select#bogo-deals-type\",\r\n    toggle_block_data_type\r\n  );\r\n  $(module_block).on(\r\n    \"change\",\r\n    \".combined-products-form select,.combined-products-form input\",\r\n    update_combined_products_list\r\n  );\r\n  $(module_block).on(\"change\", \".condition-quantity\", restrict_quantity_value);\r\n  $(module_block).on(\"blur\", \".wc_input_price\", remove_leading_zeros);\r\n  $(module_block).css(\"min-height\", $(\"#coupon_options\").height());\r\n  $(module_block).on(\"change\", \"input[name='bogo_type']\", trigger_toggle);\r\n  $(module_block).on(\r\n    \"click\",\r\n    \".acfw-styled-table .actions .remove\",\r\n    trigger_toggle\r\n  );\r\n  $(module_block)\r\n    .find(\".notice-option\")\r\n    .on(\"change\", \"input,textarea,select\", trigger_toggle);\r\n  $(module_block)\r\n    .find(\"select#bogo-condition-type,select#bogo-deals-type\")\r\n    .trigger(\"change\");\r\n  $(\"form#post\").on(\"submit\", save_on_coupon_publish);\r\n}\r\n\r\n/**\r\n * Trigger toggle editing mode.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction trigger_toggle(): void {\r\n  toggle_editing_mode(true);\r\n}\r\n\r\n/**\r\n * Restrict condition quantity value.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction restrict_quantity_value() {\r\n  const $field: JQuery = jQuery(this);\r\n\r\n  if ($field.val() < 1) $field.val(1);\r\n}\r\n","declare var jQuery: any;\r\nvar $: any = jQuery;\r\n\r\n/**\r\n * Toggle field events script.\r\n * Used by Roles Restriction and other similar modules.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport default function toggle_fields_events() {\r\n\r\n    const $module_block: JQuery = $( \".toggle-enable-fields\" );\r\n\r\n    $module_block.on( \"change\" , \".toggle-trigger-field\" , toggle_disable_enable_fields );\r\n    $module_block.find( \".toggle-trigger-field\" ).trigger( \"change\" );\r\n}\r\n\r\n/**\r\n * Toggle disable/enable fields.\r\n * \r\n * @since 1.0.0\r\n */\r\nfunction toggle_disable_enable_fields() {\r\n\r\n    const $button: JQuery     = $( this ),\r\n        $module_block: JQuery = $button.closest( \".toggle-enable-fields\" ),\r\n        $fields: JQuery       = $module_block.find( \"select,textarea,input[type='text']\" ),\r\n        toggle: boolean       = ! $button.prop( \"checked\" );\r\n\r\n    $fields.prop( \"disabled\" , toggle );\r\n\r\n    if ( toggle )\r\n        $fields.closest( \".form-field\" ).addClass( \"disabled\" );\r\n    else\r\n        $fields.closest( \".form-field\" ).removeClass( \"disabled\" );\r\n}","declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nlet exludeCouponShown = false;\r\n\r\n/**\r\n * Add upsell events script.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport default function upsell_events() {\r\n\r\n    $( \"#usage_limit_coupon_data\" ).on( \"change\" , \"#reset_usage_limit_period\" , upsell_advance_usage_limits );\r\n    $( \"#usage_restriction_coupon_data .exclude_coupon_ids_field\" ).on( \"click change focus\" , \"input,select\" , upsell_exclude_coupons_restriction );\r\n    $( \"#acfw-auto-apply-coupon\" ).on( \"change\" , \"#acfw_auto_apply_coupon_field\" , upsell_auto_apply );\r\n}\r\n\r\n/**\r\n * Usage limits upsell vex dialog.\r\n * \r\n * @since 1.1\r\n */\r\nfunction upsell_advance_usage_limits() {\r\n\r\n    const { usage_limits } = acfw_edit_coupon.upsell;\r\n\r\n    vex.dialog.alert( { unsafeMessage : `<div class=\"upsell-alert usage-limits\">${ usage_limits }</div>` } );\r\n    $(this).val( 'none' ); \r\n}\r\n\r\n/**\r\n * Usage restriction for exclude coupons upsell vex dialog.\r\n * \r\n * @since 1.1\r\n */\r\nfunction upsell_exclude_coupons_restriction() {\r\n\r\n    // prevent duplicate dialogs showing up.\r\n    if ( exludeCouponShown ) return;\r\n    exludeCouponShown = true;\r\n\r\n    const { usage_restriction } = acfw_edit_coupon.upsell;\r\n\r\n    vex.dialog.alert({\r\n        unsafeMessage : `<div class=\"upsell-alert exclude-coupon\">${ usage_restriction }</div>`,\r\n        afterClose: () => exludeCouponShown = false\r\n    });\r\n    $(this).val( '' );\r\n}\r\n\r\n/**\r\n * Auto apply upsell vex dialog.\r\n * \r\n * @since 1.1\r\n */\r\nfunction upsell_auto_apply() {\r\n\r\n    const { auto_apply } = acfw_edit_coupon.upsell;\r\n\r\n    vex.dialog.alert( { unsafeMessage : `<div class=\"upsell-alert auto-apply\">${ auto_apply }</div>` } );\r\n    $(this).prop( 'checked' , false ); \r\n}","import cart_conditions_module_events from \"./cart_conditions/index\";\r\nimport bogo_deals_module_events from \"./bogo_deals/index\";\r\nimport toggle_fields_events from \"./toggle_fields\";\r\nimport upsell_events from \"./upsell\";\r\n\r\nimport \"./assets/styles/index.scss\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst { modules , upsell } = acfw_edit_coupon;\r\n\r\njQuery( document ).ready( ( $: any ) => {\r\n\r\n    if ( modules.indexOf( \"acfw_cart_conditions_module\" ) > -1 )\r\n        cart_conditions_module_events();\r\n\r\n    if ( modules.indexOf( \"acfw_bogo_deals_module\" ) > -1 )\r\n        bogo_deals_module_events();\r\n\r\n    if ( upsell )\r\n        upsell_events();\r\n\r\n    toggle_fields_events();\r\n});"],"sourceRoot":""}