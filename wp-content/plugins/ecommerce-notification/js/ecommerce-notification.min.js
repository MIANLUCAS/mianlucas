"use strict";function vi_wn_b64DecodeUnicode(e){var t="";if(e)try{t=decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(t){return e}return t}function viSwipeDetect(e,t){var i,o,n,a,s,_,c=e,r=t||function(e){};c.addEventListener("touchstart",function(e){var t=e.changedTouches[0];i="none",o=t.pageX,n=t.pageY,_=(new Date).getTime()},!1),c.addEventListener("touchmove",function(e){e.preventDefault()},!1),c.addEventListener("touchend",function(e){var t=e.changedTouches[0];a=t.pageX-o,s=t.pageY-n,(new Date).getTime()-_<=300&&(Math.abs(a)>=150&&Math.abs(s)<=100?i=a<0?"left":"right":Math.abs(s)>=150&&Math.abs(a)<=100&&(i=s<0?"up":"down")),r(i)},!1)}jQuery(document).ready(function(){if(jQuery("#message-purchased").length>0){var e=woo_notification;_vi_ecommerce_notification_params.detect&&0!=_vi_ecommerce_notification_params.detect||e.detect_address(),viSwipeDetect(document.getElementById("message-purchased"),function(e){"none"!==e&&(parseInt(woo_notification.time_close)>0&&(jQuery("#message-purchased").unbind(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close))),woo_notification.message_hide(!1,e))})}}),jQuery(window).on("load",function(){var e=woo_notification;if(e.id=jQuery("#message-purchased").data("product_id"),e.loop=_vi_ecommerce_notification_params.loop,e.loop_session=_vi_ecommerce_notification_params.loop_session,e.loop_session_duration=parseFloat(_vi_ecommerce_notification_params.loop_session_duration),e.loop_session_total=parseInt(_vi_ecommerce_notification_params.loop_session_total),e.init_delay=parseInt(_vi_ecommerce_notification_params.initial_delay),e.total=parseInt(_vi_ecommerce_notification_params.notification_per_page),e.display_time=parseInt(_vi_ecommerce_notification_params.display_time),e.next_time=parseInt(_vi_ecommerce_notification_params.next_time),e.ajax_url=_vi_ecommerce_notification_params.ajax_url,e.products=_vi_ecommerce_notification_params.products,e.messages=_vi_ecommerce_notification_params.messages,e.image=_vi_ecommerce_notification_params.image,e.redirect_target=_vi_ecommerce_notification_params.redirect_target,e.time=_vi_ecommerce_notification_params.time,e.display_effect=_vi_ecommerce_notification_params.display_effect,e.hidden_effect=_vi_ecommerce_notification_params.hidden_effect,e.messages=_vi_ecommerce_notification_params.messages,e.names=_vi_ecommerce_notification_params.names,e.detect=_vi_ecommerce_notification_params.detect,e.billing=_vi_ecommerce_notification_params.billing,e.in_the_same_cate=_vi_ecommerce_notification_params.in_the_same_cate,e.message_custom=_vi_ecommerce_notification_params.message_custom,e.message_number_min=_vi_ecommerce_notification_params.message_number_min,e.message_number_max=_vi_ecommerce_notification_params.message_number_max,e.time_close=_vi_ecommerce_notification_params.time_close,e.show_close=_vi_ecommerce_notification_params.show_close,e.change_virtual_time=_vi_ecommerce_notification_params.change_virtual_time,e.start_virtual_time=_vi_ecommerce_notification_params.start_virtual_time,e.end_virtual_time=_vi_ecommerce_notification_params.end_virtual_time,e.change_message_number=_vi_ecommerce_notification_params.change_message_number,e.current_hour=parseInt(_vi_ecommerce_notification_params.current_hour),e.detect&&0!=e.detect)e.cities=_vi_ecommerce_notification_params.cities,e.country=_vi_ecommerce_notification_params.country,e.init();else{e.cities=[e.getCookie("wn_city")],e.country=[e.getCookie("wn_country")];var t=e.getCookie("wn_ip");t&&"undefined"!=t&&e.init()}});var woo_notification={loop:0,timeOutShow:0,timeOutHide:0,init_delay:5,total:30,display_time:5,next_time:60,count:0,intel:0,wn_popup:0,id:0,messages:"",products:"",ajax_url:"",display_effect:"",hidden_effect:"",time:"",names:"",cities:"",country:"",message_custom:"",message_number_min:"",message_number_max:"",detect:0,show_close:0,first_name_index:[],shortcodes:["{first_name}","{city}","{state}","{country}","{product}","{product_with_link}","{time_ago}","{custom}"],init:function(){if(1==this.loop){var e=Date.now(),t=this.getCookie("woo_notification_displaying");if(t)return this.timeOutShow=setTimeout(function(){woo_notification.init()},t-e),!1}this.ajax_url?this.ajax_get_data():setTimeout(function(){woo_notification.get_product()},1e3*this.init_delay),jQuery("#message-purchased").on("mouseenter",function(){window.clearTimeout(woo_notification.wn_popup),window.clearTimeout(woo_notification.timeOutShow),window.clearTimeout(woo_notification.timeOutHide)}).on("mouseleave",function(){woo_notification.message_show(!0)})},detect_address:function(){this.getCookie("wn_ip")||jQuery.getJSON("https://extreme-ip-lookup.com/json/",function(e){e.query&&woo_notification.setCookie("wn_ip",e.query,86400),e.city&&woo_notification.setCookie("wn_city",e.city,86400),e.country&&woo_notification.setCookie("wn_country",e.country,86400)})},ajax_get_data:function(){var e;this.ajax_url&&!this.getCookie("woo_notification_close")&&(e=this.id?"&id="+this.id:"",jQuery.ajax({type:"POST",data:"action=woonotification_get_product"+e,url:this.ajax_url,success:function(e){var t=JSON.parse(e);t&&"undefined"!=t&&t.length>0&&(woo_notification.products=t,setTimeout(function(){woo_notification.get_product()},1e3*woo_notification.init_delay),woo_notification.close_notify())},error:function(e){}}))},message_show:function(e=!1){var t=jQuery("#message-purchased");if(e||(this.count++,this.audio()),1==this.loop){var i=Date.now(),o=this.getCookie("woo_notification_displaying");if(!e&&o)return window.clearTimeout(this.timeOutShow),this.timeOutShow=setTimeout(function(){woo_notification.get_product()},o-i),!1;window.clearTimeout(this.timeOutHide),this.timeOutHide=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),this.setCookieNew("woo_notification_displaying",this.display_time+this.next_time),t.hasClass(this.hidden_effect)&&t.removeClass(this.hidden_effect),t.addClass(this.display_effect).css("display","flex")}else this.wn_popup=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),window.clearTimeout(this.intel),t.hasClass(this.hidden_effect)&&t.removeClass(this.hidden_effect),t.addClass(this.display_effect).css("display","flex")},message_hide:function(e=!1,t=""){var i=jQuery("#message-purchased");switch(i.hasClass(this.display_effect)&&i.removeClass(this.display_effect),t){case"left":i.addClass("bounceOutLeft");break;case"right":i.addClass("bounceOutRight");break;case"up":i.addClass("bounceOutUp");break;case"down":i.addClass("bounceOutDown");break;default:i.addClass(this.hidden_effect)}if(i.fadeOut(1e3),e||this.getCookie("woo_notification_close"))return!1;var o=this.count;1==this.loop?this.total>o&&(window.clearTimeout(this.wn_popup),this.intel=setTimeout(function(){woo_notification.get_product()},1e3*this.next_time)):(window.clearTimeout(this.wn_popup),window.clearTimeout(this.intel))},get_product:function(){var e,t,i,o,n,a=this.products,s=this.messages;if("undefined"==a||!a||!s)return!1;if(a.length>0&&s.length>0){var _=s[n=woo_notification.random(0,s.length-1)],c=a[n=woo_notification.random(0,a.length-1)];this.names&&"undefined"!=this.names?(n=woo_notification.random(0,this.names.length-1),e=vi_wn_b64DecodeUnicode(this.names[n])):e="",this.cities&&"undefined"!=this.cities?(n=woo_notification.random(0,this.cities.length-1),i=vi_wn_b64DecodeUnicode(this.cities[n])):i="","",t=this.country,o=this.get_time_string();var r='<span class="wn-popup-product-title">'+c.title+"</span>",m='<a class="wn-popup-product-title-with-link"';m+=' href="'+c.url+'">'+c.title+"</a>";var u="<small>"+_vi_ecommerce_notification_params.str_about+" "+o+" "+_vi_ecommerce_notification_params.str_ago+" </small>",d=this.message_custom,f="";c.thumb?(jQuery("#message-purchased").addClass("wn-product-with-image").removeClass("wn-product-without-image"),f=' <img class="wn-notification-image" src="'+c.thumb+'">'):jQuery("#message-purchased").addClass("wn-product-without-image").removeClass("wn-product-with-image"),d=d.replace("{number}",this.get_data_custom_number(c.url));for(var h=this.shortcodes,p=[e,i,"",t,r,m,u,d],l=_,g=h.length-1;g>=0;g--)l=l.replace(h[g],p[g]);var w="",v=f+'<p class="wn-notification-message-container">'+l+"</p>"+w;jQuery("#message-purchased").html(v),parseInt(this.show_close)>0&&(w='<div id="notify-close"></div>'),jQuery("#message-purchased").html(v+w),woo_notification.message_show(),woo_notification.close_notify()}},get_data_custom_number:function(e){if(!this.change_message_number)return this.random(this.message_number_min,this.message_number_max);if(this.current_hour<7)return this.message_number_min;let t,i,o,n=woo_notification.getCookie("wn_data_custom_number");return(n=n?JSON.parse(n):{})[e]?(i=n[e]-3>this.message_number_min?n[e]-3:this.message_number_min,o=n[e]+2<this.message_number_max?n[e]+2:this.message_number_max):(i=this.message_number_min,o=this.message_number_max),t=this.random(i,o),n[e]=t,n=JSON.stringify(n),woo_notification.setCookie("wn_data_custom_number",n,120),t},get_time_cal:function(){return this.change_virtual_time&&this.start_virtual_time&&this.end_virtual_time?this.random(3600*this.start_virtual_time,3600*this.end_virtual_time):this.random(0,3600*this.time)},get_time_string:function(){var e=this.get_time_cal(),t=parseFloat(e/86400);return t>1?1==(t=parseInt(t))?t+" "+_vi_ecommerce_notification_params.str_day:t+" "+_vi_ecommerce_notification_params.str_days:(t=parseFloat(e/3600))>1?1==(t=parseInt(t))?t+" "+_vi_ecommerce_notification_params.str_hour:t+" "+_vi_ecommerce_notification_params.str_hours:(t=parseFloat(e/60))>1?1==(t=parseInt(t))?t+" "+_vi_ecommerce_notification_params.str_min:t+" "+_vi_ecommerce_notification_params.str_mins:t<10?_vi_ecommerce_notification_params.str_few_sec:(t=parseInt(t))+" "+_vi_ecommerce_notification_params.str_secs},close_notify:function(){jQuery("#notify-close").unbind().on("click",function(){woo_notification.message_hide()})},audio:function(){if(jQuery("#ecommerce-notification-audio").length>0){var e=document.getElementById("ecommerce-notification-audio"),t=function(){e.play().then(function(){setTimeout(function(){e.stop()},0)}),document.removeEventListener("touchstart",t,!1)};document.addEventListener("touchstart",t,!1),e.play()}},random:function(e,t){e=parseInt(e),t=parseInt(t);var i=Math.random()*(t-e);return Math.round(i)+e},setCookie:function(e,t,i){var o=new Date;o.setTime(o.getTime()+1e3*i);var n="expires="+o.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"},setCookieNew:function(e,t,i="",o=!1){var n=new Date,a=n.getTime()+1e3*t;o&&(a=t),n.setTime(a),i||(i=a),document.cookie=e+"="+i+";expires="+n.toUTCString()+";path=/"},getCookie:function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),o=0;o<i.length;o++){for(var n=i[o];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}};