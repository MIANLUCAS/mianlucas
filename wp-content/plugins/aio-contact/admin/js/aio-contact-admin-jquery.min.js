(function(t){"use strict";t(function(){function e(e){let a=JSON.parse(document.getElementById("aio-contact-items").innerHTML),i=[];e.forEach(o=>{i.push(a[o]),o==e[e.length-1]&&(document.getElementById("aio-contact-items").innerHTML=JSON.stringify(i),t("#aio-contact-save-items").trigger("click"))})}var a=null;t(".color-picker").wpColorPicker(),t("body").removeClass("mobile"),t(function(){t("#sortable").sortable({handle:".aio-contact-item-text",update:function(a,i){let o=t("#sortable").sortable("toArray"),n=[];o.forEach(t=>{t.replace("aio-contact-item-","")&&n.push(t.replace("aio-contact-item-","")),t==o[o.length-1]&&e(n)})}}),t("#sortable").disableSelection()}),t(document.body).on("click",".aio-contact-item-add-trigger",e=>{let a=e.currentTarget.dataset.type;t("#itemOptions").modal("hide"),"cf7"!==a||0!=t("#item_form option").length?(t(".aio_contact_custom_fields").hide(),t(`#${a}_field`).show(),"integration"===a?(t("#icon_field").hide(),t("#color_field").hide()):(t("#icon_field").show(),t("#color_field").show()),t("#item_modal_title").html("New Item"),t("#item_modal_action").html("Add Item"),t("#item_modal_action").attr("data-type",a),t("#item_icon").iconpicker(),t("#item_icon").iconpicker("setIcon","empty"),t("#addEditItem").modal("show"),t("#addEditItem").on("shown.bs.modal",function(){t(document).off("focusin.modal"),t("#item_title").trigger("focus")}),t("#addEditItem").on("hide.bs.modal",function(){t("#addEditItem .wp-picker-clear").trigger("click"),t("#item_modal_action").removeAttr("data-type")})):Swal.fire("No CF7 Forms Found","Make sure Contact Form 7 Plugin is installed and you have forms available","error")}),t(document.body).on("click",".aio-contact-item-action-edit",e=>{let a=e.currentTarget.dataset.type,i=JSON.parse(document.getElementById("aio-contact-items").innerHTML),o=i[t(e.currentTarget).attr("data-id")];t("#item_modal_title").html(`${o.title} - Edit`),t("#item_modal_action").html("Edit Item"),t("#item_modal_action").attr("data-type",a),t("#item_modal_action").attr("data-id",t(e.currentTarget).attr("data-id")),t(".aio_contact_custom_fields").hide(),t(`#${a}_field`).show(),"integration"===a?(t("#icon_field").hide(),t("#color_field").hide()):(t("#icon_field").show(),t("#color_field").show()),t("#item_title").val(o.title),t("#item_icon").iconpicker(),t("#item_icon").iconpicker("setIcon",o.icon),t("#item_color").wpColorPicker("color",o.color),"aio"===a?t("#item_url").val(o.url):"cf7"===a?t("#item_form").val(o.form):"sc"===a?t("#item_shortcode").val(o.shortcode):"integration"===a&&(t("#item_integration").val(o.integration.type),t(`#${o.integration.type}_field`).show(),"messenger"===o.integration.type?t("#messenger_page_id").val(o.integration.page_id):"tawk"===o.integration.type&&t("#tawk_widget_id").val(o.integration.widget_id)),t("#addEditItem").modal("show"),t("#addEditItem").on("shown.bs.modal",function(){t(document).off("focusin.modal"),t("#item_title").trigger("focus")}),t("#addEditItem").on("hide.bs.modal",function(){t("#addEditItem .wp-picker-clear").trigger("click"),t("#item_modal_action").removeAttr("data-id"),t("#item_modal_action").removeAttr("data-type")})}),t(document.body).on("click",".aio-contact-agent-add",e=>{a=null,t("#agent_modal_title").html("New Agent"),t("#agent_modal_action").html("Add Agent"),t("#agent_modal_action").attr("data-id",t(e.currentTarget).attr("data-id")),t("#agent_item_id").val(t(e.currentTarget).attr("data-id")),t("#addEditAgent").modal("show"),t("#addEditAgent").on("shown.bs.modal",function(){t(document).off("focusin.modal"),t("#agent_title").trigger("focus")})}),t(document.body).on("click",".aio-contact-item-agent",e=>{let i=JSON.parse(document.getElementById("aio-contact-items").innerHTML),o=i[t(e.currentTarget).attr("data-item-id")],n=t(e.currentTarget).attr("data-id"),d=["mon","tue","wed","thu","fri","sat","sun"];t("#agent_modal_title").html(`${o.title} - Edit Agent`),t("#agent_modal_action").html("Edit Agent"),t("#agent_modal_action").attr("data-id",n),t("#agent_item_id").val(t(e.currentTarget).attr("data-item-id")),t("#agent_name").val(o.agents[n].name),t("#agent_avatar_preview").attr("src",o.agents[n].avatar),t("#agent_avatar_id").val(o.agents[n].avatar_id),d.forEach(e=>{o.agents[n].availability.days.includes(t(`#avail_${e}`).val())?t(`#avail_${e}`).attr("checked",!0):t(`#avail_${e}`).attr("checked",!1)}),t("#avail_start").val(o.agents[n].availability.start),t("#avail_end").val(o.agents[n].availability.end),t("#avail_timezone").val(o.agents[n].availability.timezone),t("#agent_url").val(o.agents[n].url),a=o.agents[n].avatar_id,t(".aio-contact-agent-delete").attr("data-id",n),t(".aio-contact-agent-delete").attr("data-item-id",t(e.currentTarget).attr("data-item-id")),t(".aio-contact-agent-delete").removeClass("d-none"),t("#addEditAgent").modal("show"),t("#addEditAgent").on("shown.bs.modal",function(){t(document).off("focusin.modal"),t("#agent_title").trigger("focus")}),t("#addEditAgent").on("hide.bs.modal",function(){t(".aio-contact-agent-delete").addClass("d-none")})});var i=window.wp.media({frame:"select",title:"Select Avatar",multiple:!1,library:{order:"DESC",orderby:"date",type:"image",search:null,uploadedTo:null},button:{text:"Done"}});t("#agent_avatar").on("click",function(t){t.preventDefault(),i.open()}),i.on("open",function(){if(a){var t=i.state().get("selection"),e=wp.media.attachment(a);t.add(e?[e]:[])}}),i.on("select",function(){var e=i.state().get("selection").first().toJSON();t("#agent_avatar_preview").attr("src",e.url),t("#agent_avatar_id").val(e.id)})})})(jQuery);